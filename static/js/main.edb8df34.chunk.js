(this["webpackJsonpphonebook-sign-up-form"]=this["webpackJsonpphonebook-sign-up-form"]||[]).push([[0],{16:function(e,t,a){e.exports={form:"RegisterView_form__2GuCV",btn:"RegisterView_btn__2-D-C",name__label:"RegisterView_name__label__3POQX",email__label:"RegisterView_email__label__3lPoq",password__label:"RegisterView_password__label__3dLJT",form__field:"RegisterView_form__field__1CJvi",label:"RegisterView_label__YF5B_"}},18:function(e,t,a){e.exports={form:"LoginView_form__3AyYP",btn:"LoginView_btn__CfxAR",email__label:"LoginView_email__label__r3vYi",password__label:"LoginView_password__label__14Ngs",form__field:"LoginView_form__field__1gc0k",label:"LoginView_label__2qmnD"}},19:function(e,t,a){e.exports={form:"ContactForm_form__1NiH1",submit__btn:"ContactForm_submit__btn__eF7FL",name__label:"ContactForm_name__label__Ygtj5",number__label:"ContactForm_number__label__2UXJd",form__field:"ContactForm_form__field__3Q27b",label:"ContactForm_label__3KgVy"}},26:function(e,t,a){e.exports={box:"AuthNav_box__1JhPu",links:"AuthNav_links__1DYiI",link:"AuthNav_link__aBCfp",link_active:"AuthNav_link_active__1hUcA"}},28:function(e,t,a){e.exports={navigation:"Navigation_navigation__1EgxP",link:"Navigation_link__2BM9A",link_active:"Navigation_link_active__2wM2b"}},32:function(e,t,a){e.exports={contact__item:"ContactItem_contact__item__16XEi",contact__text:"ContactItem_contact__text__b5cWT",delete__btn:"ContactItem_delete__btn__IVdMd"}},33:function(e,t,a){e.exports={filter:"Filter_filter__1q5kM",filter__field:"Filter_filter__field__3oXyg",filter__title:"Filter_filter__title__2P7rV"}},34:function(e,t,a){e.exports={box:"UserMenu_box__Dq8Sm",text:"UserMenu_text__3nen-",btn:"UserMenu_btn__3nGUN"}},39:function(e,t,a){e.exports={footer:"Footer_footer__7dIj9",border:"Footer_border__3KPTK"}},49:function(e,t,a){},52:function(e,t,a){e.exports={title:"HomeView_title__2HaTr"}},53:function(e,t,a){e.exports={appear:"titleAppearing_appear__MHGyE",appearActive:"titleAppearing_appearActive__2Bv-4",phonebook__title:"titleAppearing_phonebook__title__aiQDW"}},54:function(e,t,a){e.exports={list:"ContactList_list__2T7aG"}},55:function(e,t,a){e.exports={enter:"transition_enter__2r5x1",enterActive:"transition_enterActive__2v0qq",exit:"transition_exit__yK9o3",exitActive:"transition_exitActive__R_I7Q"}},56:function(e,t,a){e.exports={header:"Header_header__1v0yI"}},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(21),c=a.n(r),s=a(14),i=a(4),o=a(51),l=a(6),u=a(30),b=a(2),d=function(e){return e.auth.isLoggedIn},j=function(e){return e.auth.user.name},_=function(e){return e.auth.isLoading},p=a(1),m=["children","restricted","redirectTo"];function f(e){var t=e.children,a=e.restricted,n=void 0!==a&&a,r=e.redirectTo,c=void 0===r?"/":r,s=Object(u.a)(e,m),o=Object(i.c)(d)&&n;return Object(p.jsx)(b.d,{children:Object(p.jsx)(b.b,Object(l.a)(Object(l.a)({},s),{},{element:o?Object(p.jsx)(b.a,{to:c}):t}))})}var h=["children","redirectTo"];function O(e){var t=e.children,a=e.redirectTo,n=void 0===a?"/":a,r=Object(u.a)(e,h),c=Object(i.c)(d);return Object(p.jsx)(b.d,{children:Object(p.jsx)(b.b,Object(l.a)(Object(l.a)({},r),{},{element:c?t:Object(p.jsx)(b.a,{to:n})}))})}var x=a(52),v=a.n(x),g=a(96),N=a(53),y=a.n(N);function k(){return Object(p.jsx)(g.a,{in:!0,appear:!0,timeout:500,classNames:y.a,unmountOnExit:!0,children:Object(p.jsx)("p",{className:v.a.title,children:"Phonebook: all your contacts are stored here!"})})}var w=a(13),C=a(3),L=a(17),A=a(10),F=a.n(A),V=a(15),P=a.n(V),z=a(5);P.a.defaults.baseURL="https://connections-api.herokuapp.com";var I=function(e){P.a.defaults.headers.common.Authorization="Bearer ".concat(e)},R=function(){P.a.defaults.headers.common.Authorization=""},T=Object(z.c)("auth/register",function(){var e=Object(L.a)(F.a.mark((function e(t,a){var n,r,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,P.a.post("/users/signup",t);case 4:return r=e.sent,c=r.data,console.log(c),I(c.token),e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()),S=Object(z.c)("auth/login",function(){var e=Object(L.a)(F.a.mark((function e(t,a){var n,r,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,P.a.post("/users/login",t);case 4:return r=e.sent,c=r.data,I(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),Z=Object(z.c)("auth/logout",function(){var e=Object(L.a)(F.a.mark((function e(t,a){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,P.a.post("users/logout");case 4:R(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}()),q=Object(z.c)("auth/update",function(){var e=Object(L.a)(F.a.mark((function e(t,a){var n,r,c,s,i,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.getState,r=a.rejectWithValue,c=n(),s=c.auth.token){e.next=5;break}return e.abrupt("return",r());case 5:return e.prev=5,I(s),e.next=9,P.a.get("users/current");case 9:return i=e.sent,o=i.data,e.abrupt("return",o);case 14:return e.prev=14,e.t0=e.catch(5),e.abrupt("return",r(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,a){return e.apply(this,arguments)}}()),D=a(16),E=a.n(D),M={name:"",email:"",password:""};function B(e,t){switch(t.type){case"name":case"email":case"password":return Object(l.a)(Object(l.a)({},e),{},Object(C.a)({},t.type,t.payload));default:return e}}function J(){var e=Object(n.useReducer)(B,M),t=Object(w.a)(e,2),a=t[0],r=t[1],c=Object(i.b)();return Object(p.jsxs)("form",{className:E.a.form,onSubmit:function(e){e.preventDefault(),console.log(a),c(T(a))},autoComplete:"off",children:[Object(p.jsxs)("label",{className:E.a.label,children:[Object(p.jsx)("input",{autoFocus:!0,className:E.a.form__field,type:"text",name:"name",value:a.name,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Please check if the data you entered is valid.",placeholder:" ",onChange:function(e){return r({type:e.target.name,payload:e.target.value})},required:!0}),Object(p.jsx)("span",{className:E.a.name__label,children:"Name"})]}),Object(p.jsxs)("label",{className:E.a.label,children:[Object(p.jsx)("input",{className:E.a.form__field,type:"text",name:"email",value:a.email,pattern:"[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",title:"Please check the entered data is correct.",placeholder:" ",onChange:function(e){return r({type:e.target.name,payload:e.target.value})},required:!0}),Object(p.jsx)("span",{className:E.a.email__label,children:"Email"})]}),Object(p.jsxs)("label",{className:E.a.label,children:[Object(p.jsx)("input",{autoComplete:"off",className:E.a.form__field,type:"password",name:"password",value:a.password,placeholder:" ",onChange:function(e){return r({type:e.target.name,payload:e.target.value})}}),Object(p.jsx)("span",{className:E.a.password__label,children:"Password"})]}),Object(p.jsx)("button",{className:E.a.btn,type:"submit",children:"Register"})]})}var U=a(18),W=a.n(U),H={email:"",password:""};function Y(e,t){switch(t.type){case"email":case"password":return Object(l.a)(Object(l.a)({},e),{},Object(C.a)({},t.type,t.payload));default:return e}}function G(){var e=Object(n.useReducer)(Y,H),t=Object(w.a)(e,2),a=t[0],r=t[1],c=Object(i.b)();console.log(a);return Object(p.jsxs)("form",{className:W.a.form,onSubmit:function(e){e.preventDefault(),c(S(a))},autoComplete:"off",children:[Object(p.jsxs)("label",{className:W.a.label,children:[Object(p.jsx)("input",{autoFocus:!0,className:W.a.form__field,type:"text",name:"email",value:a.email,pattern:"[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",title:"Please check the entered data is correct.",placeholder:" ",onChange:function(e){return r({type:e.target.name,payload:e.target.value})}}),Object(p.jsx)("span",{className:W.a.email__label,children:"Email"})]}),Object(p.jsxs)("label",{className:W.a.label,children:[Object(p.jsx)("input",{className:W.a.form__field,type:"password",name:"password",value:a.password,placeholder:" ",onChange:function(e){return r({type:e.target.name,payload:e.target.value})}}),Object(p.jsx)("span",{className:W.a.password__label,children:"Password"})]}),Object(p.jsx)("button",{type:"submit",className:W.a.btn,children:"Login"})]})}var K=a(19),Q=a.n(K);var X=function(e){var t=e.changeContactsState,a=Object(n.useState)(""),r=Object(w.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),o=Object(w.a)(i,2),l=o[0],u=o[1],b=function(e){var t=e.target,a=t.name,n=t.value;"name"===a&&s(n),"phone"===a&&u(n)};return Object(p.jsxs)("form",{className:Q.a.form,onSubmit:function(e){e.preventDefault(),t({name:c,phone:l}),s(""),u("")},action:"#",children:[Object(p.jsxs)("label",{className:Q.a.label,htmlFor:"name",children:[Object(p.jsx)("input",{className:Q.a.form__field,type:"text",id:"name",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",placeholder:" ",value:c,onChange:b,required:!0}),Object(p.jsx)("span",{className:Q.a.name__label,children:"Name"})]}),Object(p.jsxs)("label",{className:Q.a.label,htmlFor:"number",children:[Object(p.jsx)("input",{className:Q.a.form__field,type:"tel",id:"number",name:"phone",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",placeholder:" ",value:l,onChange:b,required:!0}),Object(p.jsx)("span",{className:Q.a.number__label,children:"Number"})]}),Object(p.jsx)("button",{className:Q.a.submit__btn,type:"submit",children:"Add contact"})]})},$=a(32),ee=a.n($),te="https://629b0ea3656cea05fc32b859.mockapi.io",ae=Object(z.c)("contacts/fetchContacts",Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("".concat(te,"/contacts"));case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),ne=Object(z.c)("contacts/addContact",function(){var e=Object(L.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("".concat(te,"/contacts"),t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(z.c)("contacts/deleteContact",function(){var e=Object(L.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.delete("".concat(te,"/contacts/").concat(t));case 2:return a=e.sent,n=a.data.id,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function ce(e){var t=e.contact,a=t.name,n=t.phone,r=t.id,c=Object(i.b)();return Object(p.jsxs)("li",{className:ee.a.contact__item,children:[Object(p.jsxs)("span",{className:ee.a.contact__text,children:[a,": ",n]}),Object(p.jsx)("button",{className:ee.a.delete__btn,onClick:function(){return function(e){c(re(e))}(r)},children:"Delete"})]},r)}var se=a(54),ie=a.n(se),oe=a(55),le=a.n(oe),ue=a(97),be=function(e){return e.contacts.filter},de=function(e){return e.contacts.items},je=function(e){var t=de(e),a=be(e);return t.filter((function(e){var t=e.name,n=e.phone;return t.toLowerCase().includes(a.toLowerCase())||n.includes(a)}))};function _e(){var e=Object(i.c)(je);return Object(p.jsx)(ue.a,{component:"ul",className:ie.a.list,children:e.map((function(t){return Object(p.jsx)(g.a,{in:e.length>0,timeout:250,classNames:le.a,unmountOnExit:!0,children:Object(p.jsx)(ce,{contact:t},t.name)},t.id)}))})}var pe=a(33),me=a.n(pe),fe=Object(z.b)("contacts/updateFilter");function he(){var e=Object(i.c)(be),t=Object(i.b)();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:me.a.filter,children:[Object(p.jsx)("p",{className:me.a.filter__title,children:"Find contacts by name"}),Object(p.jsx)("input",{className:me.a.filter__field,type:"text",name:"name",value:e,placeholder:"Enter the name...",onChange:function(e){var a=e.target.value;return t(fe(a))}})]})})}function Oe(){var e=Object(i.c)(de),t=Object(i.b)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{className:"visually_hidden",children:"This is contacts page."}),Object(p.jsx)(X,{changeContactsState:function(a){var n=a.name,r=a.phone;if(e.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("".concat(n," is already in contacts list!"));t(ne({name:n,phone:r}))}}),Object(p.jsx)(he,{}),Object(p.jsx)(_e,{})]})}var xe=a(28),ve=a.n(xe);function ge(){var e=Object(i.c)(d);return Object(p.jsxs)("nav",{className:"navigation",children:[Object(p.jsx)(s.b,{to:"/home",className:ve.a.link,activeclassname:ve.a.link_active,children:"Home"}),e&&Object(p.jsx)(s.b,{to:"/contacts",className:ve.a.link,activeclassname:ve.a.link_active,children:"Contacts"})]})}var Ne=a(26),ye=a.n(Ne);function ke(){return Object(p.jsxs)("div",{className:ye.a.box,children:[Object(p.jsx)(s.b,{to:"/register",className:ye.a.link,activeclassname:ye.a.link_active,children:"Register"}),Object(p.jsx)(s.b,{to:"/login",className:ye.a.link,activeclassname:ye.a.link_active,children:"Login"})]})}var we=a(34),Ce=a.n(we);function Le(){var e=Object(i.c)(j),t=Object(i.b)();return Object(p.jsxs)("div",{className:Ce.a.box,children:[Object(p.jsxs)("p",{className:Ce.a.text,children:["Welcome to your phonebook, ",e,"!"]}),Object(p.jsx)("button",{type:"button",onClick:function(){return t(Z())},className:Ce.a.btn,children:"Logout"})]})}var Ae=a(56),Fe=a.n(Ae);function Ve(){var e=Object(i.c)(d);return Object(p.jsxs)("header",{className:Fe.a.header,children:[Object(p.jsx)(ge,{}),e?Object(p.jsx)(Le,{}):Object(p.jsx)(ke,{})]})}var Pe=a(39),ze=a.n(Pe);function Ie(){return Object(p.jsx)("footer",{className:ze.a.footer,children:Object(p.jsx)("p",{className:ze.a.border,children:"\xa9 2022 Phonebook"})})}a(49);function Re(){var e=Object(i.b)(),t=Object(i.c)(_);return Object(n.useEffect)((function(){e(ae())}),[e]),!t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ve,{}),Object(p.jsx)("main",{style:{padding:"20px 10px 20px 10px"},children:Object(p.jsx)(n.Suspense,{fallback:Object(p.jsx)("h1",{children:"Loading..."}),children:Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{path:"/",element:Object(p.jsx)(k,{})}),Object(p.jsx)(b.b,{path:"/home/*",element:Object(p.jsx)(f,{path:"/*",restricted:!0,children:Object(p.jsx)(k,{})})}),Object(p.jsx)(b.b,{path:"/register/*",element:Object(p.jsx)(f,{path:"/*",restricted:!0,children:Object(p.jsx)(J,{})})}),Object(p.jsx)(b.b,{path:"/login/*",element:Object(p.jsx)(f,{path:"/*",restricted:!0,redirectTo:"/contacts",children:Object(p.jsx)(G,{})})}),Object(p.jsx)(b.b,{path:"/contacts/*",element:Object(p.jsx)(O,{path:"/*",redirectTo:"/login",children:Object(p.jsx)(Oe,{})})}),Object(p.jsx)(b.b,{path:"*",element:Object(p.jsx)(b.a,{to:"/"})})]})})}),Object(p.jsx)(Ie,{})]})}var Te,Se,Ze,qe=a(31),De=a(12),Ee=a(20),Me=a(57),Be=a.n(Me),Je=Object(z.d)([],(Te={},Object(C.a)(Te,ae.fulfilled,(function(e,t){return t.payload})),Object(C.a)(Te,ne.fulfilled,(function(e,t){var a=t.payload;return[].concat(Object(qe.a)(e),[a])})),Object(C.a)(Te,re.fulfilled,(function(e,t){var a=t.payload;return e.filter((function(e){return e.id!==a}))})),Te)),Ue=Object(z.d)(!1,(Se={},Object(C.a)(Se,ae.pending,(function(){return!0})),Object(C.a)(Se,ae.fulfilled,(function(){return!1})),Object(C.a)(Se,ae.rejected,(function(){return!1})),Object(C.a)(Se,ne.pending,(function(){return!0})),Object(C.a)(Se,ne.fulfilled,(function(){return!1})),Object(C.a)(Se,ne.rejected,(function(){return!1})),Object(C.a)(Se,re.pending,(function(){return!0})),Object(C.a)(Se,re.fulfilled,(function(){return!1})),Object(C.a)(Se,re.rejected,(function(){return!1})),Se)),We=Object(z.d)("",Object(C.a)({},fe,(function(e,t){return t.payload}))),He=Object(z.e)({name:"auth",initialState:{user:{name:"",email:""},token:null,isLoggedIn:!1,isLoading:!1},extraReducers:(Ze={},Object(C.a)(Ze,T.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(C.a)(Ze,T.rejected,(function(e){e.isLoading=!1})),Object(C.a)(Ze,S.fulfilled,(function(e,t){var a=t.payload;e.user=a.user,e.token=a.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(C.a)(Ze,S.rejected,(function(e){e.isLoading=!1})),Object(C.a)(Ze,Z.fulfilled,(function(e){e.user={name:"",email:""},e.token=null,e.isLoggedIn=!1,e.isLoading=!1})),Object(C.a)(Ze,Z.rejected,(function(e){e.isLoading=!1})),Object(C.a)(Ze,q.fulfilled,(function(e,t){var a=t.payload;e.user=a,e.isLoggedIn=!0,e.isLoading=!1})),Object(C.a)(Ze,q.rejected,(function(e){e.isLoading=!1})),Ze)}).reducer,Ye=Object(qe.a)(Object(z.f)({serializableCheck:{ignoredActions:[Ee.a,Ee.f,Ee.b,Ee.c,Ee.d,Ee.e]}})),Ge={key:"auth",storage:Be.a,whitelist:["token"]},Ke=Object(z.a)({reducer:{auth:Object(Ee.g)(Ge,He),contacts:Object(De.b)({items:Je,filter:We,loading:Ue})},middleware:Ye,devTools:!1}),Qe=Object(Ee.h)(Ke),Xe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,98)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};c.a.render(Object(p.jsx)(i.a,{store:Ke,children:Object(p.jsx)(o.a,{loading:null,persistor:Qe,children:Object(p.jsx)(s.a,{children:Object(p.jsx)(Re,{})})})}),document.getElementById("root")),Xe()}},[[95,1,2]]]);
//# sourceMappingURL=main.edb8df34.chunk.js.map