{"version":3,"sources":["redux/contacts/contacts-operations.js","redux/auth/auth-selectors.js","components/UserMenu/UserMenu.module.scss","components/Footer/Footer.module.scss","redux/filter/filter-actions.js","components/AuthNav/AuthNav.module.scss","components/Header/Header.module.scss","redux/auth/auth-operations.js","components/Navigation/Navigation.js","components/AuthNav/AuthNav.js","components/UserMenu/UserMenu.js","components/Header/Header.js","components/Footer/Footer.js","Routes/PublicRoute.js","Routes/PrivateRoute.js","App.jsx","redux/contacts/contacts-reducer.js","redux/filter/filter-reducer.js","redux/auth/auth-reducer.js","redux/store.js","reportWebVitals.js","index.js"],"names":["baseURL","fetchContacts","createAsyncThunk","a","axios","get","data","addContact","contact","post","deleteContact","contactId","delete","id","getIsLoggedIn","state","auth","isLoggedIn","getUserName","user","name","getIsLoadingCurrent","isLoading","module","exports","updateFilter","createAction","defaults","token","set","headers","common","unset","register","credentials","rejectWithValue","console","log","message","signIn","signOut","_","updateUser","getState","persistedToken","Navigation","useSelector","className","to","isActive","AuthNav","styles","box","UserMenu","dispatch","useDispatch","text","type","onClick","btn","Header","header","Footer","footer","footer__signature","footer__link","href","target","rel","title","PublicRoute","children","restricted","redirectTo","routeProps","willRedirect","element","PrivateRoute","HomeView","lazy","RegisterView","LoginView","ContactsView","App","isLoadingCurrentUser","useEffect","fallback","path","items","createReducer","fulfilled","payload","filter","loading","pending","rejected","initialState","email","authReducer","combineReducers","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","contactsPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","contacts","filterReducer","devTools","process","persistor","persistStore","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","basename","document","getElementById"],"mappings":"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","file":"static/js/main.a994f49a.chunk.js","sourcesContent":["import axios from 'axios';\n\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\nconst baseURL = 'https://629b0ea3656cea05fc32b859.mockapi.io';\n\n//Receiving contacts from backend's object\nexport const fetchContacts = createAsyncThunk(\n  'contacts/fetchContacts',\n  async () => {\n    const { data } = await axios.get(`${baseURL}/contacts`);\n    return data;\n  }\n);\n\n//Adding contact to backend's object\nexport const addContact = createAsyncThunk(\n  'contacts/addContact',\n\n  async contact => {\n    const { data } = await axios.post(`${baseURL}/contacts`, contact);\n    return data;\n  }\n);\n\n//Removing contact form backend's object\nexport const deleteContact = createAsyncThunk(\n  'contacts/deleteContact',\n\n  async contactId => {\n    const {\n      data: { id },\n    } = await axios.delete(`${baseURL}/contacts/${contactId}`);\n    return id;\n  }\n);\n","export const getIsLoggedIn = state => state.auth.isLoggedIn;\n\nexport const getUserName = state => state.auth.user.name;\n\nexport const getIsLoadingCurrent = state => state.isLoading;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"UserMenu_box__Dq8Sm\",\"text\":\"UserMenu_text__3nen-\",\"btn\":\"UserMenu_btn__3nGUN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__7dIj9\",\"footer__signature\":\"Footer_footer__signature__29Icg\",\"footer__link\":\"Footer_footer__link__w6C75\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const updateFilter = createAction('contacts/updateFilter');\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"AuthNav_box__1JhPu\",\"links\":\"AuthNav_links__1DYiI\",\"link\":\"AuthNav_link__aBCfp\",\"link_active\":\"AuthNav_link_active__1hUcA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1v0yI\"};","import axios from 'axios';\n\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common['Authorization'] = '';\n  },\n};\n\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/signup', credentials);\n      console.log(data);\n      token.set(data.token);\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const signIn = createAsyncThunk(\n  'auth/login',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/login', credentials);\n\n      token.set(data.token);\n      console.log(credentials, token);\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const signOut = createAsyncThunk(\n  'auth/logout',\n  async (_, { rejectWithValue }) => {\n    try {\n      await axios.post('users/logout');\n      token.unset();\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const updateUser = createAsyncThunk(\n  'auth/update',\n  async (_, { getState, rejectWithValue }) => {\n    const state = getState();\n    const persistedToken = state.auth.token;\n    console.log(persistedToken);\n\n    if (!persistedToken) {\n      return rejectWithValue();\n    }\n    try {\n      token.set(persistedToken);\n\n      const { data } = await axios.get('users/current');\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n","import { NavLink } from 'react-router-dom';\n\nimport { useSelector } from 'react-redux';\nimport { getIsLoggedIn } from 'redux/auth/auth-selectors';\n\nexport default function Navigation() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <nav className=\"navigation\">\n      <NavLink\n        to=\"/home\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Home\n      </NavLink>\n      {isLoggedIn && (\n        <NavLink\n          to=\"/contacts\"\n          className={({ isActive }) =>\n            isActive ? 'link__active link' : 'link'\n          }\n        >\n          Contacts\n        </NavLink>\n      )}\n      <NavLink\n        to=\"*\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      ></NavLink>\n    </nav>\n  );\n}\n","import { NavLink } from 'react-router-dom';\n\nimport styles from './AuthNav.module.scss';\n\nexport function AuthNav() {\n  return (\n    <div className={styles.box}>\n      <NavLink\n        to=\"/register\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Register\n      </NavLink>\n      <NavLink\n        to=\"/login\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Login\n      </NavLink>\n    </div>\n  );\n}\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport { signOut } from '../../redux/auth/auth-operations';\nimport { getUserName } from '../../redux/auth/auth-selectors';\n\nimport styles from './UserMenu.module.scss';\n\nexport function UserMenu() {\n  const name = useSelector(getUserName);\n\n  const dispatch = useDispatch();\n\n  return (\n    <div className={styles.box}>\n      <p className={styles.text}>Welcome to your phonebook, {name}!</p>\n\n      <button\n        type=\"button\"\n        onClick={() => dispatch(signOut())}\n        className={styles.btn}\n      >\n        Logout\n      </button>\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport Navigation from '../Navigation/Navigation';\nimport { AuthNav } from '../AuthNav/AuthNav';\nimport { UserMenu } from '../UserMenu/UserMenu';\n\nimport { getIsLoggedIn } from '../../redux/auth/auth-selectors';\n\nimport styles from './Header.module.scss';\n\nexport function Header() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <header className={styles.header}>\n      <Navigation />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </header>\n  );\n}\n","import styles from './Footer.module.scss';\n\nexport function Footer() {\n  return (\n    <footer className={styles.footer}>\n      <p className={styles.footer__signature}>&#169; 2022 Phonebook by </p>\n      <a\n        className={styles.footer__link}\n        href=\"https://github.com/dairedo7\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        title=\"Github Profile Link\"\n        aria-label=\"Link to GitHub profile\"\n      >\n        Dairedo\n      </a>\n    </footer>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PublicRoute({\n  children,\n  restricted = false,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  const willRedirect = isLoggedIn && restricted;\n\n  return (\n    <Routes>\n      <Route\n        {...routeProps}\n        element={willRedirect ? <Navigate to={redirectTo} /> : children}\n      ></Route>\n    </Routes>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport { Route, Navigate } from 'react-router-dom';\n\nimport { Routes } from 'react-router-dom';\n\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PrivateRoute({\n  children,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <Routes>\n      <Route\n        {...routeProps}\n        element={isLoggedIn ? children : <Navigate to={redirectTo} />}\n      ></Route>\n    </Routes>\n  );\n}\n","import './index.css';\nimport { useEffect, Suspense, lazy } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport { Header } from './components/Header/Header';\nimport { Footer } from './components/Footer/Footer';\n\nimport { fetchContacts } from 'redux/contacts/contacts-operations';\n\n// import { contactsLoading } from 'redux/contacts/contacts-selector';\n\nimport { getIsLoadingCurrent } from 'redux/auth/auth-selectors.js';\n\nimport PublicRoute from './Routes/PublicRoute.js';\nimport PrivateRoute from './Routes/PrivateRoute.js';\n\nconst HomeView = lazy(() => import('./views/HomeView/HomeView'));\nconst RegisterView = lazy(() => import('./views/RegisterView/RegisterView'));\nconst LoginView = lazy(() => import('./views/LoginView/LoginView'));\nconst ContactsView = lazy(() => import('./views/ContactsView/ContactsView'));\n\n// import { getContacts } from 'redux/contacts/contacts-selector';\n// import { updateUser } from './redux/auth/auth-operations';\n\n// import { CSSTransition } from 'react-transition-group';\n// import titleAppearing from './titleAppearing.module.css';\n// import phonebookAppearing from './phonebookAppearing.module.css';\n\nexport default function App() {\n  const dispatch = useDispatch();\n  // const loading = useSelector(contactsLoading);\n  const isLoadingCurrentUser = useSelector(getIsLoadingCurrent);\n  const auth = useSelector(state => state.auth.isLoggedIn);\n\n  useEffect(() => {\n    dispatch(fetchContacts());\n  }, [dispatch]);\n\n  return (\n    !isLoadingCurrentUser && (\n      <>\n        <Header />\n\n        <main className=\"main\">\n          <Suspense fallback={<h1>Loading...</h1>}>\n            <Routes>\n              <Route\n                path=\"/home/*\"\n                element={\n                  <PublicRoute path=\"/\">\n                    <HomeView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/register/*\"\n                element={\n                  <PublicRoute path=\"/*\" restricted>\n                    <RegisterView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/login/*\"\n                element={\n                  <PublicRoute path=\"/*\" restricted redirectTo=\"/contacts\">\n                    <LoginView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/contacts/*\"\n                element={\n                  <PrivateRoute path=\"/*\" redirectTo=\"/login\">\n                    <ContactsView />\n                  </PrivateRoute>\n                }\n              ></Route>\n              <Route\n                path=\"*\"\n                element={\n                  auth ? <Navigate to=\"/contacts\" /> : <Navigate to=\"/home\" />\n                }\n              ></Route>\n            </Routes>\n          </Suspense>\n        </main>\n\n        <Footer />\n      </>\n    )\n  );\n}\n","import { createReducer } from '@reduxjs/toolkit';\n\n// import { addContactsSuccess } from './contacts-actions';\nimport {\n  addContact,\n  deleteContact,\n  fetchContacts,\n} from './contacts-operations';\n\nexport const items = createReducer([], {\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\n  [deleteContact.fulfilled]: (state, { payload }) =>\n    state.filter(({ id }) => id !== payload),\n});\n\nexport const loading = createReducer(false, {\n  [fetchContacts.pending]: () => true,\n  [fetchContacts.fulfilled]: () => false,\n  [fetchContacts.rejected]: () => false,\n\n  [addContact.pending]: () => true,\n  [addContact.fulfilled]: () => false,\n  [addContact.rejected]: () => false,\n\n  [deleteContact.pending]: () => true,\n  [deleteContact.fulfilled]: () => false,\n  [deleteContact.rejected]: () => false,\n});\n// export default items;\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { updateFilter } from './filter-actions';\n\nconst filter = createReducer('', {\n  [updateFilter]: (_, { payload }) => payload,\n});\n\nexport default filter;\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\n\nimport { register, signIn, signOut, updateUser } from './auth-operations';\n\nconst initialState = {\n  user: { name: '', email: '' },\n  token: null,\n  isLoggedIn: false,\n  isLoading: false,\n};\n\nconst user = createReducer(initialState, {\n  [register.fulfilled]: (_, { payload }) => {\n    console.log(payload);\n    return payload.user;\n  },\n  [signIn.fulfilled]: (_, { payload }) => payload.token,\n  [signOut.fulfilled]: () => initialState,\n  [updateUser.fulfilled]: (_, { payload }) => payload,\n});\n\nconst token = createReducer(null, {\n  [register.fulfilled]: (_, { payload }) => payload.token,\n  [signIn.fulfilled]: (_, { payload }) => payload.token,\n  [signOut.fulfilled]: () => null,\n});\n\nconst isLoggedIn = createReducer(false, {\n  [register.fulfilled]: () => true,\n  [signIn.fulfilled]: () => true,\n  [signOut.fulfilled]: () => false,\n  [updateUser.fulfilled]: () => true,\n});\n\nconst isLoading = createReducer(false, {\n  [updateUser.pending]: () => true,\n  [updateUser.fulfilled]: () => false,\n  [updateUser.rejected]: () => false,\n});\n\nexport const authReducer = combineReducers({\n  user,\n  token,\n  isLoggedIn,\n  isLoading,\n});\n","import {\n  configureStore,\n  getDefaultMiddleware,\n  combineReducers,\n} from '@reduxjs/toolkit';\n\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\n\nimport storage from 'redux-persist/lib/storage'; // defaults to localStorage for web\n\nimport { items, loading } from './contacts/contacts-reducer';\nimport filterReducer from './filter/filter-reducer';\n// import authSlice from './auth/auth-slice'; //Reducer for authorisation\nimport { authReducer } from './auth/auth-reducer';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n];\n\nconst contactsPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\n// const rootReducer = combineReducers({\n//   items,\n//   filter: filterReducer,\n//   loading,\n// });\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(contactsPersistConfig, authReducer),\n    contacts: combineReducers({\n      items,\n      filter: filterReducer,\n      loading,\n    }),\n  },\n  middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store); // wrapper for store to update the localStorage\n\n// fetch.then(x => dispatch(action(x))).catch(y => dispatch(action(y)));\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from 'App';\nimport { store, persistor } from 'redux/store';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <BrowserRouter basename=\"/phonebook-sign-up-form/\">\n        <App />\n      </BrowserRouter>\n    </PersistGate>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}