(this["webpackJsonpphonebook-sign-up-form"]=this["webpackJsonpphonebook-sign-up-form"]||[]).push([[0],{16:function(e,t,a){e.exports={form:"RegisterView_form__2GuCV",btn:"RegisterView_btn__2-D-C",name__label:"RegisterView_name__label__3POQX",email__label:"RegisterView_email__label__3lPoq",password__label:"RegisterView_password__label__3dLJT",form__field:"RegisterView_form__field__1CJvi",label:"RegisterView_label__YF5B_"}},18:function(e,t,a){e.exports={form:"LoginView_form__3AyYP",btn:"LoginView_btn__CfxAR",email__label:"LoginView_email__label__r3vYi",password__label:"LoginView_password__label__14Ngs",form__field:"LoginView_form__field__1gc0k",label:"LoginView_label__2qmnD"}},19:function(e,t,a){e.exports={form:"ContactForm_form__1NiH1",submit__btn:"ContactForm_submit__btn__eF7FL",name__label:"ContactForm_name__label__Ygtj5",number__label:"ContactForm_number__label__2UXJd",form__field:"ContactForm_form__field__3Q27b",label:"ContactForm_label__3KgVy"}},26:function(e,t,a){e.exports={box:"AuthNav_box__1JhPu",links:"AuthNav_links__1DYiI",link:"AuthNav_link__aBCfp",link_active:"AuthNav_link_active__1hUcA"}},28:function(e,t,a){e.exports={navigation:"Navigation_navigation__1EgxP",link:"Navigation_link__2BM9A",link_active:"Navigation_link_active__2wM2b"}},32:function(e,t,a){e.exports={contact__item:"ContactItem_contact__item__16XEi",contact__text:"ContactItem_contact__text__b5cWT",delete__btn:"ContactItem_delete__btn__IVdMd"}},33:function(e,t,a){e.exports={filter:"Filter_filter__1E5tH",filter__field:"Filter_filter__field__FWY-Z",filter__title:"Filter_filter__title__3xM9A"}},34:function(e,t,a){e.exports={box:"UserMenu_box__Dq8Sm",text:"UserMenu_text__3nen-",btn:"UserMenu_btn__3nGUN"}},39:function(e,t,a){e.exports={footer:"Footer_footer__7dIj9",border:"Footer_border__3KPTK"}},49:function(e,t,a){},52:function(e,t,a){e.exports={title:"HomeView_title__2HaTr"}},53:function(e,t,a){e.exports={appear:"titleAppearing_appear__MHGyE",appearActive:"titleAppearing_appearActive__2Bv-4",phonebook__title:"titleAppearing_phonebook__title__aiQDW"}},54:function(e,t,a){e.exports={list:"ContactList_list__2T7aG"}},55:function(e,t,a){e.exports={enter:"transition_enter__2r5x1",enterActive:"transition_enterActive__2v0qq",exit:"transition_exit__yK9o3",exitActive:"transition_exitActive__R_I7Q"}},56:function(e,t,a){e.exports={header:"Header_header__1v0yI"}},95:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(21),r=a.n(c),i=a(14),s=a(4),o=a(51),l=a(6),u=a(30),b=a(2),d=function(e){return e.auth.isLoggedIn},j=function(e){return e.auth.user.name},_=function(e){return e.auth.isLoading},p=a(1),f=["children","restricted","redirectTo"];function m(e){var t=e.children,a=e.restricted,n=void 0!==a&&a,c=e.redirectTo,r=void 0===c?"/":c,i=Object(u.a)(e,f),o=Object(s.c)(d)&&n;return Object(p.jsx)(b.d,{children:Object(p.jsx)(b.b,Object(l.a)(Object(l.a)({},i),{},{element:o?Object(p.jsx)(b.a,{to:r}):t}))})}var h=["children","redirectTo"];function O(e){var t=e.children,a=e.redirectTo,n=void 0===a?"/":a,c=Object(u.a)(e,h),r=Object(s.c)(d);return Object(p.jsx)(b.d,{children:Object(p.jsx)(b.b,Object(l.a)(Object(l.a)({},c),{},{element:r?t:Object(p.jsx)(b.a,{to:n})}))})}var x=a(52),g=a.n(x),v=a(96),N=a(53),w=a.n(N);function y(){return Object(p.jsx)(v.a,{in:!0,appear:!0,timeout:500,classNames:w.a,unmountOnExit:!0,children:Object(p.jsx)("p",{className:g.a.title,children:"Phonebook: all your contacts are stored here!"})})}var k=a(13),C=a(3),L=a(17),A=a(10),F=a.n(A),V=a(15),z=a.n(V),I=a(5);z.a.defaults.baseURL="https://connections-api.herokuapp.com";var P=function(e){z.a.defaults.headers.common.Authorization="Bearer ".concat(e)},R=function(){z.a.defaults.headers.common.Authorization=""},T=Object(I.c)("auth/register",function(){var e=Object(L.a)(F.a.mark((function e(t,a){var n,c,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,z.a.post("/users/signup",t);case 4:return c=e.sent,r=c.data,console.log(r),P(r.token),e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()),Z=Object(I.c)("auth/login",function(){var e=Object(L.a)(F.a.mark((function e(t,a){var n,c,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,z.a.post("/users/login",t);case 4:return c=e.sent,r=c.data,P(r.token),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),S=Object(I.c)("auth/logout",function(){var e=Object(L.a)(F.a.mark((function e(t,a){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,z.a.post("users/logout");case 4:R(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}()),E=Object(I.c)("auth/update",function(){var e=Object(L.a)(F.a.mark((function e(t,a){var n,c,r,i,s,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.getState,c=a.rejectWithValue,r=n(),i=r.auth.token){e.next=5;break}return e.abrupt("return",c());case 5:return e.prev=5,P(i),e.next=9,z.a.get("users/current");case 9:return s=e.sent,o=s.data,e.abrupt("return",o);case 14:return e.prev=14,e.t0=e.catch(5),e.abrupt("return",c(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,a){return e.apply(this,arguments)}}()),D=a(16),q=a.n(D),M={name:"",email:"",password:""};function B(e,t){switch(t.type){case"name":case"email":case"password":return Object(l.a)(Object(l.a)({},e),{},Object(C.a)({},t.type,t.payload));default:return e}}function W(){var e=Object(n.useReducer)(B,M),t=Object(k.a)(e,2),a=t[0],c=t[1],r=Object(s.b)();return Object(p.jsxs)("form",{className:q.a.form,onSubmit:function(e){e.preventDefault(),console.log(a),r(T(a))},autoComplete:"off",children:[Object(p.jsxs)("label",{className:q.a.label,children:[Object(p.jsx)("input",{autoFocus:!0,className:q.a.form__field,type:"text",name:"name",value:a.name,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Please check if the data you entered is valid.",placeholder:" ",onChange:function(e){return c({type:e.target.name,payload:e.target.value})},required:!0}),Object(p.jsx)("span",{className:q.a.name__label,children:"Name"})]}),Object(p.jsxs)("label",{className:q.a.label,children:[Object(p.jsx)("input",{className:q.a.form__field,type:"text",name:"email",value:a.email,pattern:"[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",title:"Please check the entered data is correct.",placeholder:" ",onChange:function(e){return c({type:e.target.name,payload:e.target.value})},required:!0}),Object(p.jsx)("span",{className:q.a.email__label,children:"Email"})]}),Object(p.jsxs)("label",{className:q.a.label,children:[Object(p.jsx)("input",{autoComplete:"off",className:q.a.form__field,type:"password",name:"password",value:a.password,placeholder:" ",onChange:function(e){return c({type:e.target.name,payload:e.target.value})}}),Object(p.jsx)("span",{className:q.a.password__label,children:"Password"})]}),Object(p.jsx)("button",{className:q.a.btn,type:"submit",children:"Register"})]})}var H=a(18),J=a.n(H),U={email:"",password:""};function Y(e,t){switch(t.type){case"email":case"password":return Object(l.a)(Object(l.a)({},e),{},Object(C.a)({},t.type,t.payload));default:return e}}function G(){var e=Object(n.useReducer)(Y,U),t=Object(k.a)(e,2),a=t[0],c=t[1],r=Object(s.b)();console.log(a);return Object(p.jsxs)("form",{className:J.a.form,onSubmit:function(e){e.preventDefault(),r(Z(a))},autoComplete:"off",children:[Object(p.jsxs)("label",{className:J.a.label,children:[Object(p.jsx)("input",{autoFocus:!0,className:J.a.form__field,type:"text",name:"email",value:a.email,pattern:"[a-zA-Z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",title:"Please check the entered data is correct.",placeholder:" ",onChange:function(e){return c({type:e.target.name,payload:e.target.value})}}),Object(p.jsx)("span",{className:J.a.email__label,children:"Email"})]}),Object(p.jsxs)("label",{className:J.a.label,children:[Object(p.jsx)("input",{className:J.a.form__field,type:"password",name:"password",value:a.password,placeholder:" ",onChange:function(e){return c({type:e.target.name,payload:e.target.value})}}),Object(p.jsx)("span",{className:J.a.password__label,children:"Password"})]}),Object(p.jsx)("button",{type:"submit",className:J.a.btn,children:"Login"})]})}var K=a(19),Q=a.n(K);var $=function(e){var t=e.changeContactsState,a=Object(n.useState)(""),c=Object(k.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(""),o=Object(k.a)(s,2),l=o[0],u=o[1],b=function(e){var t=e.target,a=t.name,n=t.value;"name"===a&&i(n),"phone"===a&&u(n)};return Object(p.jsxs)("form",{className:Q.a.form,onSubmit:function(e){e.preventDefault(),t({name:r,phone:l}),i(""),u("")},action:"#",children:[Object(p.jsxs)("label",{className:Q.a.label,htmlFor:"name",children:[Object(p.jsx)("input",{className:Q.a.form__field,type:"text",id:"name",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",placeholder:" ",value:r,onChange:b,required:!0}),Object(p.jsx)("span",{className:Q.a.name__label,children:"Name"})]}),Object(p.jsxs)("label",{className:Q.a.label,htmlFor:"number",children:[Object(p.jsx)("input",{className:Q.a.form__field,type:"tel",id:"number",name:"phone",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",placeholder:" ",value:l,onChange:b,required:!0}),Object(p.jsx)("span",{className:Q.a.number__label,children:"Number"})]}),Object(p.jsx)("button",{className:Q.a.submit__btn,type:"submit",children:"Add contact"})]})},X=a(32),ee=a.n(X),te="https://629b0ea3656cea05fc32b859.mockapi.io",ae=Object(I.c)("contacts/fetchContacts",Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("".concat(te,"/contacts"));case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),ne=Object(I.c)("contacts/addContact",function(){var e=Object(L.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("".concat(te,"/contacts"),t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ce=Object(I.c)("contacts/deleteContact",function(){var e=Object(L.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("".concat(te,"/contacts/").concat(t));case 2:return a=e.sent,n=a.data.id,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function re(e){var t=e.contact,a=t.name,n=t.phone,c=t.id,r=Object(s.b)();return Object(p.jsxs)("li",{className:ee.a.contact__item,children:[Object(p.jsxs)("span",{className:ee.a.contact__text,children:[a,": ",n]}),Object(p.jsx)("button",{className:ee.a.delete__btn,onClick:function(){return function(e){r(ce(e))}(c)},children:"Delete"})]},c)}var ie=a(54),se=a.n(ie),oe=a(55),le=a.n(oe),ue=a(97),be=function(e){return e.contacts.filter},de=function(e){return e.contacts.items},je=function(e){var t=de(e),a=be(e);return t.filter((function(e){var t=e.name,n=e.phone;return t.toLowerCase().includes(a.toLowerCase())||n.includes(a)}))};function _e(){var e=Object(s.c)(je);return Object(p.jsx)(ue.a,{component:"ul",className:se.a.list,children:e.map((function(t){return Object(p.jsx)(v.a,{in:e.length>0,timeout:250,classNames:le.a,unmountOnExit:!0,children:Object(p.jsx)(re,{contact:t},t.name)},t.id)}))})}var pe=a(33),fe=a.n(pe),me=Object(I.b)("contacts/updateFilter");function he(){var e=Object(s.c)(be),t=Object(s.b)();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:fe.a.filter,children:[Object(p.jsx)("p",{className:fe.a.filter__title,children:"Find contacts by name"}),Object(p.jsx)("input",{className:fe.a.filter__field,type:"text",name:"name",value:e,placeholder:"Enter the name...",onChange:function(e){var a=e.target.value;return t(me(a))}})]})})}function Oe(){var e=Object(s.c)(de),t=Object(s.b)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{className:"visually_hidden",children:"This is contacts page."}),Object(p.jsx)($,{changeContactsState:function(a){var n=a.name,c=a.phone;if(e.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("".concat(n," is already in contacts list!"));t(ne({name:n,phone:c}))}}),Object(p.jsx)(he,{}),Object(p.jsx)(_e,{})]})}var xe=a(28),ge=a.n(xe);function ve(){var e=Object(s.c)(d);return Object(p.jsxs)("nav",{className:"navigation",children:[Object(p.jsx)(i.b,{to:"/home",className:ge.a.link,activeclassname:ge.a.link_active,children:"Home"}),e&&Object(p.jsx)(i.b,{to:"/contacts",className:ge.a.link,activeclassname:ge.a.link_active,children:"Contacts"})]})}var Ne=a(26),we=a.n(Ne);function ye(){return Object(p.jsxs)("div",{className:we.a.box,children:[Object(p.jsx)(i.b,{to:"/register",className:we.a.link,activeclassname:we.a.link_active,children:"Register"}),Object(p.jsx)(i.b,{to:"/login",className:we.a.link,activeclassname:we.a.link_active,children:"Login"})]})}var ke=a(34),Ce=a.n(ke);function Le(){var e=Object(s.c)(j),t=Object(s.b)();return Object(p.jsxs)("div",{className:Ce.a.box,children:[Object(p.jsxs)("p",{className:Ce.a.text,children:["Welcome to your phonebook, ",e,"!"]}),Object(p.jsx)("button",{type:"button",onClick:function(){return t(S())},className:Ce.a.btn,children:"Logout"})]})}var Ae=a(56),Fe=a.n(Ae);function Ve(){var e=Object(s.c)(d);return Object(p.jsxs)("header",{className:Fe.a.header,children:[Object(p.jsx)(ve,{}),e?Object(p.jsx)(Le,{}):Object(p.jsx)(ye,{})]})}var ze=a(39),Ie=a.n(ze);function Pe(){return Object(p.jsx)("footer",{className:Ie.a.footer,children:Object(p.jsx)("p",{className:Ie.a.border,children:"\xa9 2022 Phonebook"})})}a(49);function Re(){var e=Object(s.b)(),t=Object(s.c)(_);return Object(n.useEffect)((function(){e(ae())}),[e]),!t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ve,{}),Object(p.jsx)("main",{style:{padding:"20px 10px 20px 10px"},children:Object(p.jsx)(n.Suspense,{fallback:Object(p.jsx)("h1",{children:"Loading..."}),children:Object(p.jsxs)(b.d,{path:"*",children:[Object(p.jsx)(b.b,{path:"/",element:Object(p.jsx)(y,{})}),Object(p.jsx)(b.b,{path:"/home/*",element:Object(p.jsx)(m,{path:"/*",restricted:!0,children:Object(p.jsx)(y,{})})}),Object(p.jsx)(b.b,{path:"/register/*",element:Object(p.jsx)(m,{path:"/*",restricted:!0,children:Object(p.jsx)(W,{})})}),Object(p.jsx)(b.b,{path:"/login/*",element:Object(p.jsx)(m,{path:"/*",restricted:!0,redirectTo:"/contacts",children:Object(p.jsx)(G,{})})}),Object(p.jsx)(b.b,{path:"/contacts/*",element:Object(p.jsx)(O,{path:"/*",redirectTo:"/login",children:Object(p.jsx)(Oe,{})})})]})})}),Object(p.jsx)(Pe,{})]})}var Te,Ze,Se,Ee=a(31),De=a(12),qe=a(20),Me=a(57),Be=a.n(Me),We=Object(I.d)([],(Te={},Object(C.a)(Te,ae.fulfilled,(function(e,t){return t.payload})),Object(C.a)(Te,ne.fulfilled,(function(e,t){var a=t.payload;return[].concat(Object(Ee.a)(e),[a])})),Object(C.a)(Te,ce.fulfilled,(function(e,t){var a=t.payload;return e.filter((function(e){return e.id!==a}))})),Te)),He=Object(I.d)(!1,(Ze={},Object(C.a)(Ze,ae.pending,(function(){return!0})),Object(C.a)(Ze,ae.fulfilled,(function(){return!1})),Object(C.a)(Ze,ae.rejected,(function(){return!1})),Object(C.a)(Ze,ne.pending,(function(){return!0})),Object(C.a)(Ze,ne.fulfilled,(function(){return!1})),Object(C.a)(Ze,ne.rejected,(function(){return!1})),Object(C.a)(Ze,ce.pending,(function(){return!0})),Object(C.a)(Ze,ce.fulfilled,(function(){return!1})),Object(C.a)(Ze,ce.rejected,(function(){return!1})),Ze)),Je=Object(I.d)("",Object(C.a)({},me,(function(e,t){return t.payload}))),Ue=Object(I.e)({name:"auth",initialState:{user:{name:"",email:""},token:null,isLoggedIn:!1,isLoading:!1},extraReducers:(Se={},Object(C.a)(Se,T.pending,(function(e){e.isLoading=!0})),Object(C.a)(Se,T.fulfilled,(function(e,t){console.log(t),e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(C.a)(Se,T.rejected,(function(e){e.isLoading=!1})),Object(C.a)(Se,Z.pending,(function(e){e.isLoading=!0})),Object(C.a)(Se,Z.fulfilled,(function(e,t){var a=t.payload;e.user=a.user,e.token=a.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(C.a)(Se,Z.rejected,(function(e){e.isLoading=!1})),Object(C.a)(Se,S.pending,(function(e){e.isLoading=!0})),Object(C.a)(Se,S.fulfilled,(function(e){e.user={name:"",email:""},e.token=null,e.isLoggedIn=!1,e.isLoading=!1})),Object(C.a)(Se,S.rejected,(function(e){e.isLoading=!1})),Object(C.a)(Se,E.pending,(function(e){e.isLoading=!0})),Object(C.a)(Se,E.fulfilled,(function(e,t){var a=t.payload;e.user=a,e.isLoggedIn=!0,e.isLoading=!1})),Object(C.a)(Se,E.rejected,(function(e){e.isLoading=!1})),Se)}).reducer,Ye=Object(Ee.a)(Object(I.f)({serializableCheck:{ignoredActions:[qe.a,qe.f,qe.b,qe.c,qe.d,qe.e]}})),Ge={key:"auth",storage:Be.a,whitelist:["token"]},Ke=Object(I.a)({reducer:{auth:Object(qe.g)(Ge,Ue),contacts:Object(De.b)({items:We,filter:Je,loading:He})},middleware:Ye,devTools:!1}),Qe=Object(qe.h)(Ke),$e=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,98)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};r.a.render(Object(p.jsx)(s.a,{store:Ke,children:Object(p.jsx)(o.a,{loading:null,persistor:Qe,children:Object(p.jsx)(i.a,{children:Object(p.jsx)(Re,{})})})}),document.getElementById("root")),$e()}},[[95,1,2]]]);
//# sourceMappingURL=main.675f1bb2.chunk.js.map