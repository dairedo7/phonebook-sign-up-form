{"version":3,"sources":["redux/contacts/contacts-operations.js","redux/auth/auth-selectors.js","components/UserMenu/UserMenu.module.scss","components/Footer/Footer.module.scss","redux/filter/filter-actions.js","components/AuthNav/AuthNav.module.scss","components/Header/Header.module.scss","components/Navigation/Navigation.js","components/AuthNav/AuthNav.js","components/UserMenu/UserMenu.js","components/Header/Header.js","components/Footer/Footer.js","Routes/PublicRoute.js","Routes/PrivateRoute.js","App.jsx","redux/contacts/contacts-reducer.js","redux/filter/filter-reducer.js","redux/auth/auth-slice.js","redux/store.js","reportWebVitals.js","index.js","redux/auth/auth-operations.js"],"names":["fetchContacts","createAsyncThunk","a","axios","get","data","addContact","contact","post","deleteContact","contactId","delete","id","getIsLoggedIn","state","auth","isLoggedIn","getUserName","user","name","getIsLoadingCurrent","isLoading","module","exports","updateFilter","createAction","Navigation","useSelector","className","to","isActive","AuthNav","styles","box","UserMenu","dispatch","useDispatch","text","type","onClick","signOut","btn","Header","header","Footer","footer","footer__signature","footer__link","href","target","rel","title","PublicRoute","children","restricted","redirectTo","routeProps","willRedirect","element","PrivateRoute","HomeView","lazy","RegisterView","LoginView","ContactsView","mapDispatchToProps","getCurrentUser","updateUser","connect","isLoadingCurrentUser","useEffect","fallback","path","items","createReducer","fulfilled","_","payload","filter","loading","pending","rejected","authSlice","createSlice","initialState","email","token","extraReducers","register","console","log","signIn","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","contactsPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","contacts","combineReducers","filterReducer","devTools","process","persistor","persistStore","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","basename","document","getElementById","defaults","baseURL","headers","common","Authorization","credentials","rejectWithValue","message","getState","persistedToken"],"mappings":"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","file":"static/js/main.cf71d054.chunk.js","sourcesContent":["import axios from 'axios';\n\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\n//Receiving contacts from backend's object\nexport const fetchContacts = createAsyncThunk(\n  'contacts/fetchContacts',\n  async () => {\n    const { data } = await axios.get(`/contacts`);\n    return data;\n  }\n);\n\n//Adding contact to backend's object\nexport const addContact = createAsyncThunk(\n  'contacts/addContact',\n\n  async contact => {\n    const { data } = await axios.post(`/contacts`, contact);\n\n    return data;\n  }\n);\n\n//Removing contact form backend's object\nexport const deleteContact = createAsyncThunk(\n  'contacts/deleteContact',\n\n  async contactId => {\n    const {\n      data: { id },\n    } = await axios.delete(`/contacts/${contactId}`);\n    // console.log(data);\n    // console.log(id);\n    // console.log(contactId);\n    return id;\n  }\n);\n","export const getIsLoggedIn = state => state.auth.isLoggedIn;\n\nexport const getUserName = state => state.auth.user.name;\n\nexport const getIsLoadingCurrent = state => state.auth.isLoading;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"UserMenu_box__Dq8Sm\",\"text\":\"UserMenu_text__3nen-\",\"btn\":\"UserMenu_btn__3nGUN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__7dIj9\",\"footer__signature\":\"Footer_footer__signature__29Icg\",\"footer__link\":\"Footer_footer__link__w6C75\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const updateFilter = createAction('contacts/updateFilter');\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"AuthNav_box__1JhPu\",\"links\":\"AuthNav_links__1DYiI\",\"link\":\"AuthNav_link__aBCfp\",\"link_active\":\"AuthNav_link_active__1hUcA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1v0yI\"};","import { NavLink } from 'react-router-dom';\n\nimport { useSelector } from 'react-redux';\nimport { getIsLoggedIn } from 'redux/auth/auth-selectors';\n\nexport default function Navigation() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <nav className=\"navigation\">\n      <NavLink\n        to=\"/home\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Home\n      </NavLink>\n      {isLoggedIn && (\n        <NavLink\n          to=\"/contacts\"\n          className={({ isActive }) =>\n            isActive ? 'link__active link' : 'link'\n          }\n        >\n          Contacts\n        </NavLink>\n      )}\n      <NavLink\n        to=\"*\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      ></NavLink>\n    </nav>\n  );\n}\n","import { NavLink } from 'react-router-dom';\n\nimport styles from './AuthNav.module.scss';\n\nexport function AuthNav() {\n  return (\n    <div className={styles.box}>\n      <NavLink\n        to=\"/register\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Register\n      </NavLink>\n      <NavLink\n        to=\"/login\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Login\n      </NavLink>\n    </div>\n  );\n}\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport { signOut } from '../../redux/auth/auth-operations';\nimport { getUserName } from '../../redux/auth/auth-selectors';\n\nimport styles from './UserMenu.module.scss';\n\nexport function UserMenu() {\n  const name = useSelector(getUserName);\n\n  const dispatch = useDispatch();\n\n  return (\n    <div className={styles.box}>\n      <p className={styles.text}>Welcome to your phonebook, {name}!</p>\n\n      <button\n        type=\"button\"\n        onClick={() => dispatch(signOut())}\n        className={styles.btn}\n      >\n        Logout\n      </button>\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport Navigation from '../Navigation/Navigation';\nimport { AuthNav } from '../AuthNav/AuthNav';\nimport { UserMenu } from '../UserMenu/UserMenu';\n\nimport { getIsLoggedIn } from '../../redux/auth/auth-selectors';\n\nimport styles from './Header.module.scss';\n\nexport function Header() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <header className={styles.header}>\n      <Navigation />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </header>\n  );\n}\n","import styles from './Footer.module.scss';\n\nexport function Footer() {\n  return (\n    <footer className={styles.footer}>\n      <p className={styles.footer__signature}>&#169; 2022 Phonebook by </p>\n      <a\n        className={styles.footer__link}\n        href=\"https://github.com/dairedo7\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        title=\"Github Profile Link\"\n        aria-label=\"Link to GitHub profile\"\n      >\n        Dairedo\n      </a>\n    </footer>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PublicRoute({\n  children,\n  restricted = false,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  const willRedirect = isLoggedIn && restricted;\n\n  return (\n    <Routes>\n      <Route\n        {...routeProps}\n        element={willRedirect ? <Navigate to={redirectTo} /> : children}\n      ></Route>\n    </Routes>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport { Route, Navigate } from 'react-router-dom';\n\nimport { Routes } from 'react-router-dom';\n\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PrivateRoute({\n  children,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <Routes>\n      <Route\n        {...routeProps}\n        element={isLoggedIn ? children : <Navigate to={redirectTo} />}\n      ></Route>\n    </Routes>\n  );\n}\n","import './index.css';\nimport { useEffect, Suspense, lazy } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport { Header } from './components/Header/Header';\nimport { Footer } from './components/Footer/Footer';\n\nimport { updateUser } from 'redux/auth/auth-operations';\n\n// import { contactsLoading } from 'redux/contacts/contacts-selector';\n\nimport { getIsLoadingCurrent } from 'redux/auth/auth-selectors.js';\n\nimport PublicRoute from './Routes/PublicRoute.js';\nimport PrivateRoute from './Routes/PrivateRoute.js';\n\nconst HomeView = lazy(() => import('./views/HomeView/HomeView'));\nconst RegisterView = lazy(() => import('./views/RegisterView/RegisterView'));\nconst LoginView = lazy(() => import('./views/LoginView/LoginView'));\nconst ContactsView = lazy(() => import('./views/ContactsView/ContactsView'));\n\n// import { getContacts } from 'redux/contacts/contacts-selector';\n// import { updateUser } from './redux/auth/auth-operations';\n\n// import { CSSTransition } from 'react-transition-group';\n// import titleAppearing from './titleAppearing.module.css';\n// import phonebookAppearing from './phonebookAppearing.module.css';\n\nfunction App({ getCurrentUser }) {\n  // const loading = useSelector(contactsLoading);\n  const isLoadingCurrentUser = useSelector(getIsLoadingCurrent);\n  const auth = useSelector(state => state.auth.isLoggedIn);\n\n  useEffect(() => {\n    getCurrentUser();\n  }, [getCurrentUser]);\n\n  return (\n    !isLoadingCurrentUser && (\n      <>\n        <Header />\n\n        <main className=\"main\">\n          <Suspense fallback={<h1>Loading...</h1>}>\n            <Routes>\n              <Route\n                path=\"/home/*\"\n                element={\n                  <PublicRoute path=\"/\">\n                    <HomeView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/register/*\"\n                element={\n                  <PublicRoute path=\"/*\" restricted>\n                    <RegisterView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/login/*\"\n                element={\n                  <PublicRoute path=\"/*\" restricted redirectTo=\"/contacts\">\n                    <LoginView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/contacts/*\"\n                element={\n                  <PrivateRoute path=\"/*\" redirectTo=\"/login\">\n                    <ContactsView />\n                  </PrivateRoute>\n                }\n              ></Route>\n              <Route\n                path=\"*\"\n                element={\n                  auth ? <Navigate to=\"/contacts\" /> : <Navigate to=\"/home\" />\n                }\n              ></Route>\n            </Routes>\n          </Suspense>\n        </main>\n\n        <Footer />\n      </>\n    )\n  );\n}\n\nconst mapDispatchToProps = {\n  getCurrentUser: updateUser,\n};\n\nexport default connect(null, mapDispatchToProps)(App);\n","import { createReducer } from '@reduxjs/toolkit';\n\n// import { addContactsSuccess } from './contacts-actions';\nimport {\n  addContact,\n  deleteContact,\n  fetchContacts,\n} from './contacts-operations';\n\nexport const items = createReducer([], {\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\n  [deleteContact.fulfilled]: (state, { payload }) =>\n    state.filter(({ id }) => id !== payload),\n});\n\nexport const loading = createReducer(false, {\n  [fetchContacts.pending]: () => true,\n  [fetchContacts.fulfilled]: () => false,\n  [fetchContacts.rejected]: () => false,\n\n  [addContact.pending]: () => true,\n  [addContact.fulfilled]: () => false,\n  [addContact.rejected]: () => false,\n\n  [deleteContact.pending]: () => true,\n  [deleteContact.fulfilled]: () => false,\n  [deleteContact.rejected]: () => false,\n});\n// export default items;\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { updateFilter } from './filter-actions';\n\nconst filter = createReducer('', {\n  [updateFilter]: (_, { payload }) => payload,\n});\n\nexport default filter;\n","import { createSlice } from '@reduxjs/toolkit';\nimport { register, signIn, signOut, updateUser } from './auth-operations';\n\nconst initialState = {\n  user: { name: '', email: '' },\n  token: null,\n  isLoggedIn: false,\n  isLoading: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    // [register.pending]: state => (state.isLoading = true),\n    [register.fulfilled](state, { payload }) {\n      // console.log(action);\n      state.user = payload.user;\n      state.token = payload.token;\n      console.log(state.token);\n      state.isLoggedIn = true;\n      state.isLoading = false;\n    },\n    [register.rejected](state) {\n      state.isLoading = false;\n    },\n\n    [signIn.pending]: state => {\n      state.isLoading = true;\n    },\n    [signIn.fulfilled]: (state, { payload }) => {\n      state.user = payload.user;\n      state.token = payload.token;\n      state.isLoggedIn = true;\n      state.isLoading = false;\n    },\n    [signIn.rejected](state) {\n      state.isLoading = false;\n    },\n\n    [signOut.pending]: state => {\n      state.isLoading = true;\n    },\n    [signOut.fulfilled](state) {\n      state.user = { name: '', email: '' };\n      state.token = null;\n      state.isLoggedIn = false;\n      state.isLoading = false;\n    },\n    [signOut.rejected](state) {\n      state.isLoading = false;\n    },\n\n    [updateUser.pending]: state => {\n      state.isLoading = true;\n    },\n    [updateUser.fulfilled](state, { payload }) {\n      state.user = payload;\n      // console.log(payload);\n      state.isLoggedIn = true;\n      state.isLoading = false;\n    },\n    [updateUser.rejected](state) {\n      state.isLoading = false;\n    },\n  },\n});\nexport default authSlice.reducer;\n","import {\n  configureStore,\n  getDefaultMiddleware,\n  combineReducers,\n} from '@reduxjs/toolkit';\n\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\n\nimport storage from 'redux-persist/lib/storage'; // defaults to localStorage for web\n\nimport { items, loading } from './contacts/contacts-reducer';\nimport filterReducer from './filter/filter-reducer';\nimport authSlice from './auth/auth-slice'; //Reducer for authorisation\n// import { authReducer } from './auth/auth-reducer';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n];\n\n//Configuration of persistor\nconst contactsPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\n// const rootReducer = combineReducers({\n//   items,\n//   filter: filterReducer,\n//   loading,\n// });\n\n//The storage: the rootReducer + devTools for dev only\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(contactsPersistConfig, authSlice),\n    contacts: combineReducers({\n      items,\n      filter: filterReducer,\n      loading,\n    }),\n  },\n  middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store); // wrapper for store to update the localStorage\n\n// fetch.then(x => dispatch(action(x))).catch(y => dispatch(action(y)));\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from 'App';\nimport { store, persistor } from 'redux/store';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <BrowserRouter basename=\"/phonebook-sign-up-form/\">\n        <App />\n      </BrowserRouter>\n    </PersistGate>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import axios from 'axios';\n\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/signup', credentials);\n      token.set(null);\n      token.set(data.token);\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const signIn = createAsyncThunk(\n  'auth/login',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/login', credentials);\n      token.set(data.token);\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const signOut = createAsyncThunk(\n  'auth/logout',\n  async (_, { rejectWithValue }) => {\n    try {\n      await axios.post('/users/logout');\n      token.unset();\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const updateUser = createAsyncThunk(\n  'auth/update',\n  async (_, { getState, rejectWithValue }) => {\n    const state = getState();\n    const persistedToken = state.auth.token;\n\n    if (!persistedToken) {\n      return rejectWithValue();\n    }\n\n    token.set(persistedToken);\n    try {\n      const { data } = await axios.get('/users/current');\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n"],"sourceRoot":""}