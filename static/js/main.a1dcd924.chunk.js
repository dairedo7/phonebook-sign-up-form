(this["webpackJsonpphonebook-sign-up-form"]=this["webpackJsonpphonebook-sign-up-form"]||[]).push([[1],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f}));var c=n(18),r=n(9),a=n.n(r),i=n(15),o=n.n(i),u=n(4);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var s=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){o.a.defaults.headers.common.Authorization=""},l=Object(u.c)("auth/register",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var c,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/users/signup",t);case 4:return r=e.sent,i=r.data,console.log(i),s(i.token),e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",c(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),j=Object(u.c)("auth/login",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var c,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/users/login",t);case 4:return r=e.sent,i=r.data,s(i.token),e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(u.c)("auth/logout",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("users/logout");case 4:b(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(u.c)("auth/update",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var c,r,i,u,b,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState,r=n.rejectWithValue,i=c(),u=i.auth.token){e.next=5;break}return e.abrupt("return",r());case 5:return e.prev=5,s(u),e.next=9,o.a.get("users/current");case 9:return b=e.sent,l=b.data,e.abrupt("return",l);case 14:return e.prev=14,e.t0=e.catch(5),e.abrupt("return",r(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}())},11:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return j}));var c=n(18),r=n(9),a=n.n(r),i=n(15),o=n.n(i),u=n(4),s="https://629b0ea3656cea05fc32b859.mockapi.io",b=Object(u.c)("contacts/fetchContacts",Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat(s,"/contacts"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),l=Object(u.c)("contacts/addContact",function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat(s,"/contacts"),t);case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(u.c)("contacts/deleteContact",function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("".concat(s,"/contacts/").concat(t));case 2:return n=e.sent,c=n.data.id,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},14:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var c=function(e){return e.auth.isLoggedIn},r=function(e){return e.auth.user.name},a=function(e){return e.auth.isLoading}},23:function(e,t,n){e.exports={box:"AuthNav_box__1JhPu",links:"AuthNav_links__1DYiI",link:"AuthNav_link__aBCfp",link_active:"AuthNav_link_active__1hUcA"}},25:function(e,t,n){e.exports={navigation:"Navigation_navigation__1EgxP",link:"Navigation_link__2BM9A",link__active:"Navigation_link__active__1aSi4"}},30:function(e,t,n){e.exports={box:"UserMenu_box__Dq8Sm",text:"UserMenu_text__3nen-",btn:"UserMenu_btn__3nGUN"}},31:function(e,t,n){e.exports={footer:"Footer_footer__7dIj9",footer__signature:"Footer_footer__signature__29Icg",footer__link:"Footer_footer__link__w6C75"}},35:function(e,t,n){},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(4),r=Object(c.b)("contacts/updateFilter")},48:function(e,t,n){e.exports={header:"Header_header__1v0yI"}},85:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(26),a=n.n(r),i=n(13),o=n(6),u=n(47),s=(n(35),n(2)),b=n(25),l=n.n(b),j=n(14),d=n(1);function f(){var e=Object(o.c)(j.b);return Object(d.jsxs)("nav",{className:"navigation",children:[Object(d.jsx)(i.b,{to:"/home",className:l.a.link,activeclassname:l.a.link__active,children:"Home"}),e&&Object(d.jsx)(i.b,{to:"/contacts",className:l.a.link,activeclassname:l.a.link__active,children:"Contacts"})]})}var O=n(23),h=n.n(O);function p(){return Object(d.jsxs)("div",{className:h.a.box,children:[Object(d.jsx)(i.b,{to:"/register",className:h.a.link,activeclassname:h.a.link_active,children:"Register"}),Object(d.jsx)(i.b,{to:"/login",className:h.a.link,activeclassname:h.a.link_active,children:"Login"})]})}var g=n(10),v=n(30),x=n.n(v);function _(){var e=Object(o.c)(j.c),t=Object(o.b)();return Object(d.jsxs)("div",{className:x.a.box,children:[Object(d.jsxs)("p",{className:x.a.text,children:["Welcome to your phonebook, ",e,"!"]}),Object(d.jsx)("button",{type:"button",onClick:function(){return t(Object(g.c)())},className:x.a.btn,children:"Logout"})]})}var m=n(48),k=n.n(m);function L(){var e=Object(o.c)(j.b);return Object(d.jsxs)("header",{className:k.a.header,children:[Object(d.jsx)(f,{}),e?Object(d.jsx)(_,{}):Object(d.jsx)(p,{})]})}var y=n(31),N=n.n(y);function w(){return Object(d.jsxs)("footer",{className:N.a.footer,children:[Object(d.jsx)("p",{className:N.a.footer__signature,children:"\xa9 2022 Phonebook by "}),Object(d.jsx)("a",{className:N.a.footer__link,href:"https://github.com/dairedo7",target:"_blank",rel:"noopener noreferrer",title:"Github Profile Link","aria-label":"Link to GitHub profile",children:"Dairedo"})]})}var I=n(11),C=n(17),A=n(28),F=["children","restricted","redirectTo"];function T(e){var t=e.children,n=e.restricted,c=void 0!==n&&n,r=e.redirectTo,a=void 0===r?"/":r,i=Object(A.a)(e,F),u=Object(o.c)(j.b)&&c;return Object(d.jsx)(s.d,{children:Object(d.jsx)(s.b,Object(C.a)(Object(C.a)({},i),{},{element:u?Object(d.jsx)(s.a,{to:a}):t}))})}var P=["children","redirectTo"];function z(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/":n,r=Object(A.a)(e,P),a=Object(o.c)(j.b);return Object(d.jsx)(s.d,{children:Object(d.jsx)(s.b,Object(C.a)(Object(C.a)({},r),{},{element:a?t:Object(d.jsx)(s.a,{to:c})}))})}var S=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(9),n.e(5)]).then(n.bind(null,104))})),U=Object(c.lazy)((function(){return n.e(8).then(n.bind(null,105))})),B=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,106))})),W=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(4)]).then(n.bind(null,108))}));function D(){var e=Object(o.b)(),t=Object(o.c)(j.a),n=Object(o.c)((function(e){return e.auth.isLoggedIn}));return Object(c.useEffect)((function(){e(Object(I.c)())}),[e]),!t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(L,{}),Object(d.jsx)("main",{className:"main",children:Object(d.jsx)(c.Suspense,{fallback:Object(d.jsx)("h1",{children:"Loading..."}),children:Object(d.jsxs)(s.d,{children:[Object(d.jsx)(s.b,{path:"/",element:Object(d.jsx)(S,{})}),Object(d.jsx)(s.b,{path:"/home/*",element:Object(d.jsx)(T,{path:"/*",restricted:!0,children:Object(d.jsx)(S,{})})}),Object(d.jsx)(s.b,{path:"/register/*",element:Object(d.jsx)(T,{path:"/*",restricted:!0,children:Object(d.jsx)(U,{})})}),Object(d.jsx)(s.b,{path:"/login/*",element:Object(d.jsx)(T,{path:"/*",restricted:!0,redirectTo:"/contacts",children:Object(d.jsx)(B,{})})}),Object(d.jsx)(s.b,{path:"/contacts/*",element:Object(d.jsx)(z,{path:"/*",redirectTo:"/login",children:Object(d.jsx)(W,{})})}),Object(d.jsx)(s.b,{path:"*",element:n?Object(d.jsx)(s.a,{to:"/contacts"}):Object(d.jsx)(s.a,{to:"/"})})]})})}),Object(d.jsx)(w,{})]})}var M,V,E,G=n(29),H=n(4),J=n(12),R=n(19),q=n(49),Y=n.n(q),K=n(3),Q=Object(H.d)([],(M={},Object(K.a)(M,I.c.fulfilled,(function(e,t){return t.payload})),Object(K.a)(M,I.a.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(G.a)(e),[n])})),Object(K.a)(M,I.b.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),M)),X=Object(H.d)(!1,(V={},Object(K.a)(V,I.c.pending,(function(){return!0})),Object(K.a)(V,I.c.fulfilled,(function(){return!1})),Object(K.a)(V,I.c.rejected,(function(){return!1})),Object(K.a)(V,I.a.pending,(function(){return!0})),Object(K.a)(V,I.a.fulfilled,(function(){return!1})),Object(K.a)(V,I.a.rejected,(function(){return!1})),Object(K.a)(V,I.b.pending,(function(){return!0})),Object(K.a)(V,I.b.fulfilled,(function(){return!1})),Object(K.a)(V,I.b.rejected,(function(){return!1})),V)),Z=n(45),$=Object(H.d)("",Object(K.a)({},Z.a,(function(e,t){return t.payload}))),ee=Object(H.e)({name:"auth",initialState:{user:{name:"",email:""},token:null,isLoggedIn:!1,isLoading:!1},extraReducers:(E={},Object(K.a)(E,g.a.pending,(function(e){return e.isLoading=!0})),Object(K.a)(E,g.a.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(K.a)(E,g.a.rejected,(function(e){e.isLoading=!1})),Object(K.a)(E,g.b.pending,(function(e){e.isLoading=!0})),Object(K.a)(E,g.b.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(K.a)(E,g.b.rejected,(function(e){e.isLoading=!1})),Object(K.a)(E,g.c.pending,(function(e){e.isLoading=!0})),Object(K.a)(E,g.c.fulfilled,(function(e){e.user={name:"",email:""},e.token=null,e.isLoggedIn=!1,e.isLoading=!1})),Object(K.a)(E,g.c.rejected,(function(e){e.isLoading=!1})),Object(K.a)(E,g.d.pending,(function(e){e.isLoading=!0})),Object(K.a)(E,g.d.fulfilled,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0,e.isLoading=!1})),Object(K.a)(E,g.d.rejected,(function(e){e.isLoading=!1})),E)}).reducer,te=Object(G.a)(Object(H.f)({serializableCheck:{ignoredActions:[R.a,R.f,R.b,R.c,R.d,R.e]}})),ne={key:"auth",storage:Y.a,whitelist:["token"]},ce=Object(H.a)({reducer:{auth:Object(R.g)(ne,ee),contacts:Object(J.b)({items:Q,filter:$,loading:X})},middleware:te,devTools:!1}),re=Object(R.h)(ce),ae=function(e){e&&e instanceof Function&&n.e(10).then(n.bind(null,107)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};a.a.render(Object(d.jsx)(o.a,{store:ce,children:Object(d.jsx)(u.a,{loading:null,persistor:re,children:Object(d.jsx)(i.a,{children:Object(d.jsx)(D,{})})})}),document.getElementById("root")),ae()}},[[85,2,3]]]);
//# sourceMappingURL=main.a1dcd924.chunk.js.map