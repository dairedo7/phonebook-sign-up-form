{"version":3,"sources":["redux/auth/auth-operations.js","redux/contacts/contacts-operations.js","redux/auth/auth-selectors.js","components/UserMenu/UserMenu.module.scss","components/Footer/Footer.module.scss","redux/filter/filter-actions.js","components/AuthNav/AuthNav.module.scss","components/Header/Header.module.scss","components/Navigation/Navigation.js","components/AuthNav/AuthNav.js","components/UserMenu/UserMenu.js","components/Header/Header.js","components/Footer/Footer.js","Routes/PublicRoute.js","Routes/PrivateRoute.js","App.jsx","redux/contacts/contacts-reducer.js","redux/filter/filter-reducer.js","redux/auth/auth-slice.js","redux/store.js","reportWebVitals.js","index.js"],"names":["AUTH_TOKEN","axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","rejectWithValue","post","data","message","signIn","signOut","_","updateUser","getState","state","persistedToken","auth","get","fetchContacts","addContact","contact","deleteContact","contactId","delete","id","getIsLoggedIn","isLoggedIn","getUserName","user","name","getIsLoadingCurrent","isLoading","module","exports","updateFilter","createAction","Navigation","useSelector","className","to","isActive","AuthNav","styles","box","UserMenu","dispatch","useDispatch","text","type","onClick","btn","Header","header","Footer","footer","footer__signature","footer__link","href","target","rel","title","PublicRoute","children","restricted","redirectTo","routeProps","willRedirect","element","PrivateRoute","HomeView","lazy","RegisterView","LoginView","ContactsView","mapDispatchToProps","getCurrentUser","connect","isLoadingCurrentUser","useEffect","fallback","path","items","createReducer","fulfilled","payload","filter","loading","pending","rejected","authSlice","createSlice","initialState","email","extraReducers","console","log","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","contactsPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","contacts","combineReducers","filterReducer","devTools","process","persistor","persistStore","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","basename","document","getElementById"],"mappings":"mRAKIA,E,gDADJC,IAAMC,SAASC,QAAU,wCAEzB,IAAMC,EAAQ,SACRA,GACFJ,EAAaI,EACbH,IAAMC,SAASG,QAAQC,OAAOC,cAA9B,iBAAwDP,IAHtDI,EAAQ,WASVH,IAAMC,SAASG,QAAQC,OAAOC,cAAgB,IAIrCC,EAAWC,YACtB,gBADsC,uCAEtC,WAAOC,EAAP,sBAAAC,EAAA,6DAAsBC,EAAtB,EAAsBA,gBAAtB,kBAE2BX,IAAMY,KAAK,gBAAiBH,GAFvD,uBAEYI,EAFZ,EAEYA,KAERV,EAAU,MACVA,EAAUU,EAAKV,OALnB,kBAOWU,GAPX,2DASWF,EAAgB,KAAMG,UATjC,0DAFsC,yDAgB3BC,EAASP,YACpB,aADoC,uCAEpC,WAAOC,EAAP,sBAAAC,EAAA,6DAAsBC,EAAtB,EAAsBA,gBAAtB,kBAG2BX,IAAMY,KAAK,eAAgBH,GAHtD,uBAGYI,EAHZ,EAGYA,KAERV,EAAUU,EAAKV,OALnB,kBAOWU,GAPX,2DASWF,EAAgB,KAAMG,UATjC,0DAFoC,yDAgBzBE,EAAUR,YACrB,cADqC,uCAErC,WAAOS,EAAP,kBAAAP,EAAA,6DAAYC,EAAZ,EAAYA,gBAAZ,kBAEUX,IAAMY,KAAK,iBAFrB,OAGIT,IAHJ,yEAKWQ,EAAgB,KAAMG,UALjC,yDAFqC,yDAY1BI,EAAaV,YACxB,cADwC,uCAExC,WAAOS,EAAP,4BAAAP,EAAA,yDAAYS,EAAZ,EAAYA,SAAUR,EAAtB,EAAsBA,gBACdS,EAAQD,IACRE,EAAiBD,EAAME,KAAKnB,MAFpC,yCAMWQ,KANX,uBASIR,EAAUkB,GATd,SAW2BrB,IAAMuB,IAAI,kBAXrC,uBAWYV,EAXZ,EAWYA,KAXZ,kBAaWA,GAbX,2DAeWF,EAAgB,KAAMG,UAfjC,0DAFwC,0D,0LC3DpCZ,EAAU,8CAGHsB,EAAgBhB,YAC3B,yBAD2C,sBAE3C,8BAAAE,EAAA,sEACyBV,IAAMuB,IAAN,UAAarB,EAAb,cADzB,uBACUW,EADV,EACUA,KADV,kBAESA,GAFT,4CAOWY,EAAajB,YACxB,sBADwC,uCAGxC,WAAMkB,GAAN,iBAAAhB,EAAA,sEACyBV,IAAMY,KAAN,UAAcV,EAAd,aAAkCwB,GAD3D,uBACUb,EADV,EACUA,KADV,kBAESA,GAFT,2CAHwC,uDAU7Bc,EAAgBnB,YAC3B,yBAD2C,uCAG3C,WAAMoB,GAAN,iBAAAlB,EAAA,sEAGYV,IAAM6B,OAAN,UAAgB3B,EAAhB,qBAAoC0B,IAHhD,uBAEYE,EAFZ,EAEIjB,KAAQiB,GAFZ,kBAISA,GAJT,2CAH2C,wD,gCC1B7C,sGAAO,IAAMC,EAAgB,SAAAX,GAAK,OAAIA,EAAME,KAAKU,YAEpCC,EAAc,SAAAb,GAAK,OAAIA,EAAME,KAAKY,KAAKC,MAEvCC,EAAsB,SAAAhB,GAAK,OAAIA,EAAMiB,Y,mBCHlDC,EAAOC,QAAU,CAAC,IAAM,sBAAsB,KAAO,uBAAuB,IAAM,wB,mBCAlFD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,kBAAoB,kCAAkC,aAAe,+B,qDCDvH,6CAEaC,EAAeC,YAAa,0B,mBCDzCH,EAAOC,QAAU,CAAC,IAAM,qBAAqB,MAAQ,uBAAuB,KAAO,sBAAsB,YAAc,+B,mBCAvHD,EAAOC,QAAU,CAAC,OAAS,yB,wHCIZ,SAASG,IACtB,IAAMV,EAAaW,YAAYZ,KAE/B,OACE,sBAAKa,UAAU,aAAf,UACE,cAAC,IAAD,CACEC,GAAG,QACHD,UAAW,qBAAGE,SAA2B,oBAAsB,QAFjE,kBAMCd,GACC,cAAC,IAAD,CACEa,GAAG,YACHD,UAAW,qBAAGE,SACD,oBAAsB,QAHrC,sBASF,cAAC,IAAD,CACED,GAAG,IACHD,UAAW,qBAAGE,SAA2B,oBAAsB,a,qBCxBhE,SAASC,IACd,OACE,sBAAKH,UAAWI,IAAOC,IAAvB,UACE,cAAC,IAAD,CACEJ,GAAG,YACHD,UAAW,qBAAGE,SAA2B,oBAAsB,QAFjE,sBAMA,cAAC,IAAD,CACED,GAAG,SACHD,UAAW,qBAAGE,SAA2B,oBAAsB,QAFjE,sB,6BCNC,SAASI,IACd,IAAMf,EAAOQ,YAAYV,KAEnBkB,EAAWC,cAEjB,OACE,sBAAKR,UAAWI,IAAOC,IAAvB,UACE,oBAAGL,UAAWI,IAAOK,KAArB,wCAAuDlB,EAAvD,OAEA,wBACEmB,KAAK,SACLC,QAAS,kBAAMJ,EAASnC,gBACxB4B,UAAWI,IAAOQ,IAHpB,uB,qBCNC,SAASC,IACd,IAAMzB,EAAaW,YAAYZ,KAE/B,OACE,yBAAQa,UAAWI,IAAOU,OAA1B,UACE,cAAChB,EAAD,IACCV,EAAa,cAACkB,EAAD,IAAe,cAACH,EAAD,O,qBCd5B,SAASY,IACd,OACE,yBAAQf,UAAWI,IAAOY,OAA1B,UACE,mBAAGhB,UAAWI,IAAOa,kBAArB,qCACA,mBACEjB,UAAWI,IAAOc,aAClBC,KAAK,8BACLC,OAAO,SACPC,IAAI,sBACJC,MAAM,sBACN,aAAW,yBANb,wB,qECAS,SAASC,EAAT,GAKX,IAJFC,EAIC,EAJDA,SAIC,IAHDC,kBAGC,aAFDC,kBAEC,MAFY,IAEZ,EADEC,EACF,iBAEKC,EADa7B,YAAYZ,MACIsC,EAEnC,OACE,cAAC,IAAD,UACE,cAAC,IAAD,2BACME,GADN,IAEEE,QAASD,EAAe,cAAC,IAAD,CAAU3B,GAAIyB,IAAiBF,O,gCCXhD,SAASM,EAAT,GAIX,IAHFN,EAGC,EAHDA,SAGC,IAFDE,kBAEC,MAFY,IAEZ,EADEC,EACF,iBACKvC,EAAaW,YAAYZ,KAE/B,OACE,cAAC,IAAD,UACE,cAAC,IAAD,2BACMwC,GADN,IAEEE,QAASzC,EAAaoC,EAAW,cAAC,IAAD,CAAUvB,GAAIyB,SCAvD,IAAMK,EAAWC,gBAAK,kBAAM,8DACtBC,EAAeD,gBAAK,kBAAM,iCAC1BE,EAAYF,gBAAK,kBAAM,uDACvBG,EAAeH,gBAAK,kBAAM,8DA4EhC,I,MAAMI,EAAqB,CACzBC,eAAgB/D,KAGHgE,cAAQ,KAAMF,EAAdE,EAvEf,YAAkC,IAAnBD,EAAkB,EAAlBA,eACP9B,EAAWC,cAEX+B,EAAuBxC,YAAYP,KACnCd,EAAOqB,aAAY,SAAAvB,GAAK,OAAIA,EAAME,KAAKU,cAO7C,OALAoD,qBAAU,WACRjC,EAAS3B,eACTyD,MACC,CAAC9B,EAAU8B,KAGXE,GACC,qCACE,cAAC1B,EAAD,IAEA,sBAAMb,UAAU,OAAhB,SACE,cAAC,WAAD,CAAUyC,SAAU,4CAApB,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CACEC,KAAK,UACLb,QACE,cAACN,EAAD,CAAamB,KAAK,IAAlB,SACE,cAACX,EAAD,QAIN,cAAC,IAAD,CACEW,KAAK,cACLb,QACE,cAACN,EAAD,CAAamB,KAAK,KAAKjB,YAAU,EAAjC,SACE,cAACQ,EAAD,QAIN,cAAC,IAAD,CACES,KAAK,WACLb,QACE,cAACN,EAAD,CAAamB,KAAK,KAAKjB,YAAU,EAACC,WAAW,YAA7C,SACE,cAACQ,EAAD,QAIN,cAAC,IAAD,CACEQ,KAAK,cACLb,QACE,cAACC,EAAD,CAAcY,KAAK,KAAKhB,WAAW,SAAnC,SACE,cAACS,EAAD,QAIN,cAAC,IAAD,CACEO,KAAK,IACLb,QACEnD,EAAO,cAAC,IAAD,CAAUuB,GAAG,cAAiB,cAAC,IAAD,CAAUA,GAAG,mBAO5D,cAACc,EAAD,U,uDCnFK4B,EAAQC,YAAc,IAAD,mBAC/BhE,IAAciE,WAAY,SAACxE,EAAD,YAAMyE,WADD,cAE/BjE,IAAWgE,WAAY,SAACrE,EAAD,OAAUsE,EAAV,EAAUA,QAAV,4BAA4BtE,GAA5B,CAAmCsE,OAF3B,cAG/B/D,IAAc8D,WAAY,SAACrE,EAAD,OAAUsE,EAAV,EAAUA,QAAV,OACzBtE,EAAMuE,QAAO,qBAAG7D,KAAgB4D,QAJF,IAOrBE,EAAUJ,aAAc,GAAD,mBACjChE,IAAcqE,SAAU,kBAAM,KADG,cAEjCrE,IAAciE,WAAY,kBAAM,KAFC,cAGjCjE,IAAcsE,UAAW,kBAAM,KAHE,cAKjCrE,IAAWoE,SAAU,kBAAM,KALM,cAMjCpE,IAAWgE,WAAY,kBAAM,KANI,cAOjChE,IAAWqE,UAAW,kBAAM,KAPK,cASjCnE,IAAckE,SAAU,kBAAM,KATG,cAUjClE,IAAc8D,WAAY,kBAAM,KAVC,cAWjC9D,IAAcmE,UAAW,kBAAM,KAXE,I,QCRrBH,EAJAH,YAAc,GAAD,eACzBhD,KAAe,SAACvB,EAAD,YAAMyE,YCgETK,EA3DGC,YAAY,CAC5B7D,KAAM,OACN8D,aATmB,CACnB/D,KAAM,CAAEC,KAAM,GAAI+D,MAAO,IACzB/F,MAAO,KACP6B,YAAY,EACZK,WAAW,GAMX8D,eAAa,mBAEV5F,IAASkF,WAFC,SAEUrE,EAFV,GAE+B,IAAZsE,EAAW,EAAXA,QAE5BtE,EAAMc,KAAOwD,EAAQxD,KACrBd,EAAMjB,MAAQuF,EAAQvF,MACtBiG,QAAQC,IAAIjF,EAAMjB,OAClBiB,EAAMY,YAAa,EACnBZ,EAAMiB,WAAY,KART,cAcVtB,IAAO8E,SAAU,SAAAzE,GAChBA,EAAMiB,WAAY,KAfT,cAiBVtB,IAAO0E,WAAY,SAACrE,EAAD,GAAyB,IAAfsE,EAAc,EAAdA,QAC5BtE,EAAMc,KAAOwD,EAAQxD,KACrBd,EAAMjB,MAAQuF,EAAQvF,MAEtBiB,EAAMY,YAAa,EACnBZ,EAAMiB,WAAY,KAtBT,cAwBVtB,IAAO+E,UAxBG,SAwBO1E,GAChBA,EAAMiB,WAAY,KAzBT,cA4BVrB,IAAQ6E,SAAU,SAAAzE,GACjBA,EAAMiB,WAAY,KA7BT,cA+BVrB,IAAQyE,WA/BE,SA+BSrE,GAClBA,EAAMc,KAAO,CAAEC,KAAM,GAAI+D,MAAO,IAChC9E,EAAMjB,MAAQ,KACdiB,EAAMY,YAAa,EACnBZ,EAAMiB,WAAY,KAnCT,cAqCVrB,IAAQ8E,UArCE,SAqCQ1E,GACjBA,EAAMiB,WAAY,KAtCT,cAyCVnB,IAAW2E,SAAU,SAAAzE,GACpBA,EAAMiB,WAAY,KA1CT,cA4CVnB,IAAWuE,WA5CD,SA4CYrE,EA5CZ,GA4CiC,IAAZsE,EAAW,EAAXA,QAC9BtE,EAAMc,KAAOwD,EAGbtE,EAAMY,YAAa,EACnBZ,EAAMiB,WAAY,KAjDT,cAmDVnB,IAAW4E,UAnDD,SAmDW1E,GACpBA,EAAMiB,WAAY,KApDT,KAwDf,QC7CMiE,GAAU,YACXC,YAAqB,CACtBC,kBAAmB,CACjBC,eAAgB,CAACC,IAAOC,IAAWC,IAAOC,IAASC,IAAOC,SAM1DC,GAAwB,CAC5BC,IAAK,OACLC,YACAC,UAAW,CAAC,UAUDC,GAAQC,YAAe,CAClCC,QAAS,CACPhG,KAAMiG,YAAeP,GAAuBjB,GAC5CyB,SAAUC,YAAgB,CACxBlC,QACAI,OAAQ+B,EACR9B,aAGJU,cACAqB,UAAUC,IAGCC,GAAYC,YAAaV,IC/CvBW,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,+BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCGdQ,IAASC,OACP,cAAC,IAAD,CAAUrB,MAAOA,GAAjB,SACE,cAAC,IAAD,CAAaxB,QAAS,KAAMiC,UAAWA,GAAvC,SACE,cAAC,IAAD,CAAea,SAAS,2BAAxB,SACE,cAAC,EAAD,UAINC,SAASC,eAAe,SAM1Bb,O","file":"static/js/main.1eed88be.chunk.js","sourcesContent":["import axios from 'axios';\n\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\nlet AUTH_TOKEN;\nconst token = {\n  set(token) {\n    AUTH_TOKEN = token;\n    axios.defaults.headers.common.Authorization = `Bearer ${AUTH_TOKEN}`;\n\n    // console.log(token);\n    // token = null;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/signup', credentials);\n      // console.log(data, data.token);\n      token.set(null);\n      token.set(data.token);\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const signIn = createAsyncThunk(\n  'auth/login',\n  async (credentials, { rejectWithValue }) => {\n    // console.log(credentials, token);\n    try {\n      const { data } = await axios.post('/users/login', credentials);\n\n      token.set(data.token);\n      // console.log(credentials, token);\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const signOut = createAsyncThunk(\n  'auth/logout',\n  async (_, { rejectWithValue }) => {\n    try {\n      await axios.post('/users/logout');\n      token.unset();\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const updateUser = createAsyncThunk(\n  'auth/update',\n  async (_, { getState, rejectWithValue }) => {\n    const state = getState();\n    const persistedToken = state.auth.token;\n    // console.log(persistedToken);\n\n    if (!persistedToken) {\n      return rejectWithValue();\n    }\n    try {\n      token.set(persistedToken);\n\n      const { data } = await axios.get('/users/current');\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n","import axios from 'axios';\n\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\nconst baseURL = 'https://629b0ea3656cea05fc32b859.mockapi.io';\n\n//Receiving contacts from backend's object\nexport const fetchContacts = createAsyncThunk(\n  'contacts/fetchContacts',\n  async () => {\n    const { data } = await axios.get(`${baseURL}/contacts`);\n    return data;\n  }\n);\n\n//Adding contact to backend's object\nexport const addContact = createAsyncThunk(\n  'contacts/addContact',\n\n  async contact => {\n    const { data } = await axios.post(`${baseURL}/contacts`, contact);\n    return data;\n  }\n);\n\n//Removing contact form backend's object\nexport const deleteContact = createAsyncThunk(\n  'contacts/deleteContact',\n\n  async contactId => {\n    const {\n      data: { id },\n    } = await axios.delete(`${baseURL}/contacts/${contactId}`);\n    return id;\n  }\n);\n","export const getIsLoggedIn = state => state.auth.isLoggedIn;\n\nexport const getUserName = state => state.auth.user.name;\n\nexport const getIsLoadingCurrent = state => state.isLoading;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"UserMenu_box__Dq8Sm\",\"text\":\"UserMenu_text__3nen-\",\"btn\":\"UserMenu_btn__3nGUN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__7dIj9\",\"footer__signature\":\"Footer_footer__signature__29Icg\",\"footer__link\":\"Footer_footer__link__w6C75\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const updateFilter = createAction('contacts/updateFilter');\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"AuthNav_box__1JhPu\",\"links\":\"AuthNav_links__1DYiI\",\"link\":\"AuthNav_link__aBCfp\",\"link_active\":\"AuthNav_link_active__1hUcA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1v0yI\"};","import { NavLink } from 'react-router-dom';\n\nimport { useSelector } from 'react-redux';\nimport { getIsLoggedIn } from 'redux/auth/auth-selectors';\n\nexport default function Navigation() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <nav className=\"navigation\">\n      <NavLink\n        to=\"/home\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Home\n      </NavLink>\n      {isLoggedIn && (\n        <NavLink\n          to=\"/contacts\"\n          className={({ isActive }) =>\n            isActive ? 'link__active link' : 'link'\n          }\n        >\n          Contacts\n        </NavLink>\n      )}\n      <NavLink\n        to=\"*\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      ></NavLink>\n    </nav>\n  );\n}\n","import { NavLink } from 'react-router-dom';\n\nimport styles from './AuthNav.module.scss';\n\nexport function AuthNav() {\n  return (\n    <div className={styles.box}>\n      <NavLink\n        to=\"/register\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Register\n      </NavLink>\n      <NavLink\n        to=\"/login\"\n        className={({ isActive }) => (isActive ? 'link__active link' : 'link')}\n      >\n        Login\n      </NavLink>\n    </div>\n  );\n}\n","import { useSelector, useDispatch } from 'react-redux';\n\nimport { signOut } from '../../redux/auth/auth-operations';\nimport { getUserName } from '../../redux/auth/auth-selectors';\n\nimport styles from './UserMenu.module.scss';\n\nexport function UserMenu() {\n  const name = useSelector(getUserName);\n\n  const dispatch = useDispatch();\n\n  return (\n    <div className={styles.box}>\n      <p className={styles.text}>Welcome to your phonebook, {name}!</p>\n\n      <button\n        type=\"button\"\n        onClick={() => dispatch(signOut())}\n        className={styles.btn}\n      >\n        Logout\n      </button>\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport Navigation from '../Navigation/Navigation';\nimport { AuthNav } from '../AuthNav/AuthNav';\nimport { UserMenu } from '../UserMenu/UserMenu';\n\nimport { getIsLoggedIn } from '../../redux/auth/auth-selectors';\n\nimport styles from './Header.module.scss';\n\nexport function Header() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <header className={styles.header}>\n      <Navigation />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </header>\n  );\n}\n","import styles from './Footer.module.scss';\n\nexport function Footer() {\n  return (\n    <footer className={styles.footer}>\n      <p className={styles.footer__signature}>&#169; 2022 Phonebook by </p>\n      <a\n        className={styles.footer__link}\n        href=\"https://github.com/dairedo7\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        title=\"Github Profile Link\"\n        aria-label=\"Link to GitHub profile\"\n      >\n        Dairedo\n      </a>\n    </footer>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PublicRoute({\n  children,\n  restricted = false,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  const willRedirect = isLoggedIn && restricted;\n\n  return (\n    <Routes>\n      <Route\n        {...routeProps}\n        element={willRedirect ? <Navigate to={redirectTo} /> : children}\n      ></Route>\n    </Routes>\n  );\n}\n","import { useSelector } from 'react-redux';\n\nimport { Route, Navigate } from 'react-router-dom';\n\nimport { Routes } from 'react-router-dom';\n\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PrivateRoute({\n  children,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  return (\n    <Routes>\n      <Route\n        {...routeProps}\n        element={isLoggedIn ? children : <Navigate to={redirectTo} />}\n      ></Route>\n    </Routes>\n  );\n}\n","import './index.css';\nimport { useEffect, Suspense, lazy } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport { Header } from './components/Header/Header';\nimport { Footer } from './components/Footer/Footer';\n\nimport { fetchContacts } from 'redux/contacts/contacts-operations';\nimport { updateUser } from 'redux/auth/auth-operations';\n\n// import { contactsLoading } from 'redux/contacts/contacts-selector';\n\nimport { getIsLoadingCurrent } from 'redux/auth/auth-selectors.js';\n\nimport PublicRoute from './Routes/PublicRoute.js';\nimport PrivateRoute from './Routes/PrivateRoute.js';\n\nconst HomeView = lazy(() => import('./views/HomeView/HomeView'));\nconst RegisterView = lazy(() => import('./views/RegisterView/RegisterView'));\nconst LoginView = lazy(() => import('./views/LoginView/LoginView'));\nconst ContactsView = lazy(() => import('./views/ContactsView/ContactsView'));\n\n// import { getContacts } from 'redux/contacts/contacts-selector';\n// import { updateUser } from './redux/auth/auth-operations';\n\n// import { CSSTransition } from 'react-transition-group';\n// import titleAppearing from './titleAppearing.module.css';\n// import phonebookAppearing from './phonebookAppearing.module.css';\n\nfunction App({ getCurrentUser }) {\n  const dispatch = useDispatch();\n  // const loading = useSelector(contactsLoading);\n  const isLoadingCurrentUser = useSelector(getIsLoadingCurrent);\n  const auth = useSelector(state => state.auth.isLoggedIn);\n\n  useEffect(() => {\n    dispatch(fetchContacts());\n    getCurrentUser();\n  }, [dispatch, getCurrentUser]);\n\n  return (\n    !isLoadingCurrentUser && (\n      <>\n        <Header />\n\n        <main className=\"main\">\n          <Suspense fallback={<h1>Loading...</h1>}>\n            <Routes>\n              <Route\n                path=\"/home/*\"\n                element={\n                  <PublicRoute path=\"/\">\n                    <HomeView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/register/*\"\n                element={\n                  <PublicRoute path=\"/*\" restricted>\n                    <RegisterView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/login/*\"\n                element={\n                  <PublicRoute path=\"/*\" restricted redirectTo=\"/contacts\">\n                    <LoginView />\n                  </PublicRoute>\n                }\n              ></Route>\n              <Route\n                path=\"/contacts/*\"\n                element={\n                  <PrivateRoute path=\"/*\" redirectTo=\"/login\">\n                    <ContactsView />\n                  </PrivateRoute>\n                }\n              ></Route>\n              <Route\n                path=\"*\"\n                element={\n                  auth ? <Navigate to=\"/contacts\" /> : <Navigate to=\"/home\" />\n                }\n              ></Route>\n            </Routes>\n          </Suspense>\n        </main>\n\n        <Footer />\n      </>\n    )\n  );\n}\n\nconst mapDispatchToProps = {\n  getCurrentUser: updateUser,\n};\n\nexport default connect(null, mapDispatchToProps)(App);\n","import { createReducer } from '@reduxjs/toolkit';\n\n// import { addContactsSuccess } from './contacts-actions';\nimport {\n  addContact,\n  deleteContact,\n  fetchContacts,\n} from './contacts-operations';\n\nexport const items = createReducer([], {\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\n  [deleteContact.fulfilled]: (state, { payload }) =>\n    state.filter(({ id }) => id !== payload),\n});\n\nexport const loading = createReducer(false, {\n  [fetchContacts.pending]: () => true,\n  [fetchContacts.fulfilled]: () => false,\n  [fetchContacts.rejected]: () => false,\n\n  [addContact.pending]: () => true,\n  [addContact.fulfilled]: () => false,\n  [addContact.rejected]: () => false,\n\n  [deleteContact.pending]: () => true,\n  [deleteContact.fulfilled]: () => false,\n  [deleteContact.rejected]: () => false,\n});\n// export default items;\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { updateFilter } from './filter-actions';\n\nconst filter = createReducer('', {\n  [updateFilter]: (_, { payload }) => payload,\n});\n\nexport default filter;\n","import { createSlice } from '@reduxjs/toolkit';\nimport { register, signIn, signOut, updateUser } from './auth-operations';\n\nconst initialState = {\n  user: { name: '', email: '' },\n  token: null,\n  isLoggedIn: false,\n  isLoading: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    // [register.pending]: state => (state.isLoading = true),\n    [register.fulfilled](state, { payload }) {\n      // console.log(action);\n      state.user = payload.user;\n      state.token = payload.token;\n      console.log(state.token);\n      state.isLoggedIn = true;\n      state.isLoading = false;\n    },\n    // [register.rejected](state) {\n    //   state.isLoading = false;\n    // },\n\n    [signIn.pending]: state => {\n      state.isLoading = true;\n    },\n    [signIn.fulfilled]: (state, { payload }) => {\n      state.user = payload.user;\n      state.token = payload.token;\n      // console.log(state.token);\n      state.isLoggedIn = true;\n      state.isLoading = false;\n    },\n    [signIn.rejected](state) {\n      state.isLoading = false;\n    },\n\n    [signOut.pending]: state => {\n      state.isLoading = true;\n    },\n    [signOut.fulfilled](state) {\n      state.user = { name: '', email: '' };\n      state.token = null;\n      state.isLoggedIn = false;\n      state.isLoading = false;\n    },\n    [signOut.rejected](state) {\n      state.isLoading = false;\n    },\n\n    [updateUser.pending]: state => {\n      state.isLoading = true;\n    },\n    [updateUser.fulfilled](state, { payload }) {\n      state.user = payload;\n      // state.token = payload.token;\n      // console.log(payload);\n      state.isLoggedIn = true;\n      state.isLoading = false;\n    },\n    [updateUser.rejected](state) {\n      state.isLoading = false;\n    },\n  },\n});\nexport default authSlice.reducer;\n","import {\n  configureStore,\n  getDefaultMiddleware,\n  combineReducers,\n} from '@reduxjs/toolkit';\n\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\n\nimport storage from 'redux-persist/lib/storage'; // defaults to localStorage for web\n\nimport { items, loading } from './contacts/contacts-reducer';\nimport filterReducer from './filter/filter-reducer';\nimport authSlice from './auth/auth-slice'; //Reducer for authorisation\n// import { authReducer } from './auth/auth-reducer';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n];\n\n//Configuration of persistor\nconst contactsPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\n// const rootReducer = combineReducers({\n//   items,\n//   filter: filterReducer,\n//   loading,\n// });\n\n//The storage: the rootReducer + devTools for dev only\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(contactsPersistConfig, authSlice),\n    contacts: combineReducers({\n      items,\n      filter: filterReducer,\n      loading,\n    }),\n  },\n  middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store); // wrapper for store to update the localStorage\n\n// fetch.then(x => dispatch(action(x))).catch(y => dispatch(action(y)));\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from 'App';\nimport { store, persistor } from 'redux/store';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <BrowserRouter basename=\"/phonebook-sign-up-form/\">\n        <App />\n      </BrowserRouter>\n    </PersistGate>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}